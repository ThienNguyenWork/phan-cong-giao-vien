{"ast":null,"code":"import { CommonModule } from '@angular/common';\n// Sửa đường dẫn import: BỎ đuôi '.ts' khỏi các Component để phù hợp với quy tắc của Angular CLI\nimport { SidebarComponent } from './components/Sidebar';\nimport { HeaderComponent } from './components/Header';\nimport { FilterSectionComponent } from './components/FilterSection';\nimport { StudentTableComponent } from './components/StudentTable';\nimport { TeacherAssignmentComponent } from './components/TeacherAssignment';\nimport { LandingPageComponent } from './components/LandingPage';\nimport { HealthTableComponent } from './components/HealthTable';\nimport { MENU_SBN, MENU_ASSIGNMENT, MENU_HEALTH, MOCK_STUDENTS, GRADE_STRUCTURE } from './constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = a0 => ({\n  \"lg:ml-64\": a0\n});\nfunction AppComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0\");\n    i0.ɵɵelementStart(2, \"app-landing-page\", 2);\n    i0.ɵɵlistener(\"onSelect\", function AppComponent_ng_container_2_Template_app_landing_page_onSelect_2_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onSelectModule($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n\\u00A0 \\u00A0 \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AppComponent_div_3_app_sidebar_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-sidebar\", 11);\n    i0.ɵɵlistener(\"menuChange\", function AppComponent_div_3_app_sidebar_3_Template_app_sidebar_menuChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.onViewChange($event));\n    });\n    i0.ɵɵtext(1, \"\\n\\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"items\", ctx_r1.sidebarItems)(\"activeId\", ctx_r1.currentView);\n  }\n}\nfunction AppComponent_div_3_ng_container_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementStart(2, \"app-filter-section\", 12);\n    i0.ɵɵlistener(\"onFilterChange\", function AppComponent_div_3_ng_container_18_Template_app_filter_section_onFilterChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.handleFilterChange($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelement(4, \"app-student-table\", 13);\n    i0.ɵɵtext(5, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"context\", ctx_r1.getFilterContext());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"students\", ctx_r1.displayStudents);\n  }\n}\nfunction AppComponent_div_3_ng_container_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵtext(2, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementStart(3, \"app-filter-section\", 12);\n    i0.ɵɵlistener(\"onFilterChange\", function AppComponent_div_3_ng_container_21_Template_app_filter_section_onFilterChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.handleFilterChange($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelement(5, \"app-health-table\", 13);\n    i0.ɵɵtext(6, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"context\", ctx_r1.getFilterContext());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"students\", ctx_r1.displayStudents);\n  }\n}\nfunction AppComponent_div_3_ng_container_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0\");\n    i0.ɵɵelement(2, \"app-teacher-assignment\");\n    i0.ɵɵtext(3, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AppComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1, \"\\n\\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵtext(2, \"\\n\\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵtemplate(3, AppComponent_div_3_app_sidebar_3_Template, 2, 2, \"app-sidebar\", 4);\n    i0.ɵɵtext(4, \"\\n\\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementStart(5, \"div\", 5);\n    i0.ɵɵtext(6, \"\\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementStart(7, \"app-header\", 6);\n    i0.ɵɵlistener(\"toggleSidebar\", function AppComponent_div_3_Template_app_header_toggleSidebar_7_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onToggleSidebar());\n    })(\"goBackHome\", function AppComponent_div_3_Template_app_header_goBackHome_7_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onBackHome());\n    });\n    i0.ɵɵtext(8, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementStart(10, \"main\", 7)(11, \"div\", 8)(12, \"h2\", 9);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(14, \"\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementStart(15, \"div\", 10);\n    i0.ɵɵtext(16, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵtext(17, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵtemplate(18, AppComponent_div_3_ng_container_18_Template, 6, 2, \"ng-container\", 0);\n    i0.ɵɵtext(19, \" \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵtext(20, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵtemplate(21, AppComponent_div_3_ng_container_21_Template, 7, 2, \"ng-container\", 0);\n    i0.ɵɵtext(22, \" \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵtext(23, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵtemplate(24, AppComponent_div_3_ng_container_24_Template, 4, 0, \"ng-container\", 0);\n    i0.ɵɵtext(25, \" \\u00A0 \\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n\\u00A0 \\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27, \"\\n\\u00A0 \\u00A0 \\u00A0 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n\\u00A0 \\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.currentView !== \"phan-cong\" && ctx_r1.isSidebarOpen);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx_r1.currentView !== \"phan-cong\" && ctx_r1.isSidebarOpen));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"title\", ctx_r1.getHeaderTitle());\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getPageTitle(), \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.currentView === \"mau-giao\" || ctx_r1.currentView === \"nha-tre\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.currentView === \"sk-mau-giao\" || ctx_r1.currentView === \"sk-nha-tre\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.currentView === \"phan-cong\");\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor() {\n      this.viewMode = 'landing';\n      this.currentView = '';\n      this.sidebarItems = [];\n      this.isSidebarOpen = true;\n      // Data State\n      this.allStudents = MOCK_STUDENTS;\n      this.displayStudents = [];\n    }\n    onSelectModule(type) {\n      this.viewMode = 'app';\n      // Reset sidebar state to open when entering a module\n      this.isSidebarOpen = true;\n      if (type === 'sbn') {\n        this.sidebarItems = MENU_SBN;\n        this.currentView = 'mau-giao';\n      } else if (type === 'health') {\n        this.sidebarItems = MENU_HEALTH;\n        this.currentView = 'sk-mau-giao';\n      } else {\n        this.sidebarItems = MENU_ASSIGNMENT;\n        this.currentView = 'phan-cong';\n      }\n      this.resetDisplayData();\n    }\n    onBackHome() {\n      this.viewMode = 'landing';\n      this.currentView = '';\n      this.sidebarItems = [];\n    }\n    onViewChange(viewId) {\n      this.currentView = viewId;\n      this.resetDisplayData();\n    }\n    resetDisplayData() {\n      // Start empty. Data is only loaded when \"Khởi tạo sổ\" is clicked\n      this.displayStudents = [];\n    }\n    handleFilterChange(filter) {\n      const context = this.getFilterContext();\n      this.displayStudents = this.allStudents.filter(student => {\n        // 1. Context Filter\n        let matchContext = false;\n        if (context === 'mau-giao') {\n          matchContext = student.className.includes('Mầm') || student.className.includes('Chồi') || student.className.includes('Lá');\n        } else {\n          matchContext = student.className.includes('tháng');\n        }\n        if (!matchContext) return false;\n        // 2. Grade Filter\n        if (filter.grade) {\n          // If a grade is selected (e.g., \"Khối Mầm\"), check if class belongs to that grade\n          const gradeInfo = GRADE_STRUCTURE[context].find(g => g.name === filter.grade);\n          if (gradeInfo && !gradeInfo.classes.includes(student.className)) {\n            return false;\n          }\n        }\n        // 3. Class Filter\n        if (filter.className && student.className !== filter.className) {\n          return false;\n        }\n        // 4. Keyword Filter (Name or Code)\n        if (filter.keyword) {\n          const term = filter.keyword.toLowerCase();\n          if (!student.fullName.toLowerCase().includes(term) && !student.code.toLowerCase().includes(term)) {\n            return false;\n          }\n        }\n        // 5. Exact Code Filter\n        if (filter.code) {\n          if (!student.code.includes(filter.code) && !student.studentId.includes(filter.code)) {\n            return false;\n          }\n        }\n        return true;\n      });\n    }\n    onToggleSidebar() {\n      this.isSidebarOpen = !this.isSidebarOpen;\n    }\n    getFilterContext() {\n      if (this.currentView.includes('nha-tre')) {\n        return 'nha-tre';\n      }\n      return 'mau-giao';\n    }\n    // Returns title for the top header bar\n    getHeaderTitle() {\n      if (this.currentView === 'phan-cong') {\n        return 'Phân công giáo viên';\n      }\n      if (this.currentView.startsWith('sk-')) {\n        return 'Sổ theo dõi sức khoẻ trẻ';\n      }\n      return 'Sổ bé ngoan';\n    }\n    // Returns title for the page content h2\n    getPageTitle() {\n      switch (this.currentView) {\n        case 'mau-giao':\n          return 'Sổ Bé Ngoan - Trẻ Mẫu Giáo';\n        case 'nha-tre':\n          return 'Sổ Bé Ngoan - Nhà Trẻ';\n        case 'phan-cong':\n          return 'Phân Công Giáo Viên';\n        case 'sk-mau-giao':\n          return 'Sổ Sức khỏe Điện tử - Trẻ Mẫu Giáo';\n        case 'sk-nha-tre':\n          return 'Sổ Sức khỏe Điện tử - Nhà Trẻ';\n        default:\n          return 'Trang quản lý';\n      }\n    }\n    static {\n      this.ɵfac = function AppComponent_Factory(t) {\n        return new (t || AppComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppComponent,\n        selectors: [[\"app-root\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 5,\n        vars: 2,\n        consts: [[4, \"ngIf\"], [\"class\", \"flex h-screen w-screen bg-[#f3f4f6]\", 4, \"ngIf\"], [3, \"onSelect\"], [1, \"flex\", \"h-screen\", \"w-screen\", \"bg-[#f3f4f6]\"], [3, \"items\", \"activeId\", \"menuChange\", 4, \"ngIf\"], [1, \"flex-1\", \"flex\", \"flex-col\", \"w-full\", \"h-full\", \"transition-all\", \"duration-300\", 3, \"ngClass\"], [3, \"toggleSidebar\", \"goBackHome\", \"title\"], [1, \"flex-1\", \"w-full\", \"h-full\", \"overflow-auto\", \"p-6\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-6\"], [1, \"text-xl\", \"font-medium\", \"text-gray-800\", \"text-center\", \"w-full\"], [1, \"max-w-full\", \"mx-auto\"], [3, \"menuChange\", \"items\", \"activeId\"], [3, \"onFilterChange\", \"context\"], [3, \"students\"]],\n        template: function AppComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtext(0, \"\\n\\u00A0 \\u00A0 \");\n            i0.ɵɵtext(1, \"\\n\\u00A0 \\u00A0 \");\n            i0.ɵɵtemplate(2, AppComponent_ng_container_2_Template, 4, 0, \"ng-container\", 0)(3, AppComponent_div_3_Template, 29, 9, \"div\", 1);\n            i0.ɵɵtext(4, \"\\n\\u00A0 \");\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.viewMode === \"landing\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.viewMode === \"app\");\n          }\n        },\n        dependencies: [CommonModule, i1.NgClass, i1.NgIf, SidebarComponent, HeaderComponent, FilterSectionComponent, StudentTableComponent, TeacherAssignmentComponent, LandingPageComponent, HealthTableComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return AppComponent;\n})();","map":{"version":3,"names":["CommonModule","SidebarComponent","HeaderComponent","FilterSectionComponent","StudentTableComponent","TeacherAssignmentComponent","LandingPageComponent","HealthTableComponent","MENU_SBN","MENU_ASSIGNMENT","MENU_HEALTH","MOCK_STUDENTS","GRADE_STRUCTURE","i0","ɵɵelementContainerStart","ɵɵtext","ɵɵelementStart","ɵɵlistener","AppComponent_ng_container_2_Template_app_landing_page_onSelect_2_listener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","onSelectModule","ɵɵelementEnd","AppComponent_div_3_app_sidebar_3_Template_app_sidebar_menuChange_0_listener","_r4","onViewChange","ɵɵproperty","sidebarItems","currentView","AppComponent_div_3_ng_container_18_Template_app_filter_section_onFilterChange_2_listener","_r5","handleFilterChange","ɵɵelement","ɵɵadvance","getFilterContext","displayStudents","AppComponent_div_3_ng_container_21_Template_app_filter_section_onFilterChange_3_listener","_r6","ɵɵtemplate","AppComponent_div_3_app_sidebar_3_Template","AppComponent_div_3_Template_app_header_toggleSidebar_7_listener","_r3","onToggleSidebar","AppComponent_div_3_Template_app_header_goBackHome_7_listener","onBackHome","AppComponent_div_3_ng_container_18_Template","AppComponent_div_3_ng_container_21_Template","AppComponent_div_3_ng_container_24_Template","isSidebarOpen","ɵɵpureFunction1","_c0","getHeaderTitle","ɵɵtextInterpolate1","getPageTitle","AppComponent","constructor","viewMode","allStudents","type","resetDisplayData","viewId","filter","context","student","matchContext","className","includes","grade","gradeInfo","find","g","name","classes","keyword","term","toLowerCase","fullName","code","studentId","startsWith","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","AppComponent_Template","rf","ctx","AppComponent_ng_container_2_Template","AppComponent_div_3_Template","i1","NgClass","NgIf","encapsulation"],"sources":["D:\\VN AI SOFTWARE\\Code\\phan-cong-giao-vien\\App.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n// Sửa đường dẫn import: BỎ đuôi '.ts' khỏi các Component để phù hợp với quy tắc của Angular CLI\nimport { SidebarComponent } from './components/Sidebar';\nimport { HeaderComponent } from './components/Header';\nimport { FilterSectionComponent } from './components/FilterSection';\nimport { StudentTableComponent } from './components/StudentTable';\nimport { TeacherAssignmentComponent } from './components/TeacherAssignment';\nimport { LandingPageComponent } from './components/LandingPage';\nimport { HealthTableComponent } from './components/HealthTable';\n// Đã loại bỏ đuôi '.ts' khỏi types và constants để giải quyết lỗi import\nimport { MenuItem, Student } from './types';\nimport { MENU_SBN, MENU_ASSIGNMENT, MENU_HEALTH, MOCK_STUDENTS, GRADE_STRUCTURE } from './constants';\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [\n    CommonModule, \n    SidebarComponent, \n    HeaderComponent, \n    FilterSectionComponent, \n    StudentTableComponent,\n    TeacherAssignmentComponent,\n    LandingPageComponent,\n    HealthTableComponent\n  ],\n  template: `\n    <!-- Case 1: Landing Page -->\n    <ng-container *ngIf=\"viewMode === 'landing'\">\n       <app-landing-page (onSelect)=\"onSelectModule($event)\"></app-landing-page>\n    </ng-container>\n\n    <!-- Case 2: App Dashboard -->\n    <div *ngIf=\"viewMode === 'app'\" class=\"flex h-screen w-screen bg-[#f3f4f6]\">\n      <!-- Sidebar is only shown if NOT in Assignment view AND isSidebarOpen is true -->\n      <app-sidebar \n        *ngIf=\"currentView !== 'phan-cong' && isSidebarOpen\"\n        [items]=\"sidebarItems\"\n        [activeId]=\"currentView\" \n        (menuChange)=\"onViewChange($event)\">\n      </app-sidebar>\n      \n      <!-- Main Content Container: Margin is applied only if Sidebar is visible -->\n      <div class=\"flex-1 flex flex-col w-full h-full transition-all duration-300\"\n           [ngClass]=\"{'lg:ml-64': currentView !== 'phan-cong' && isSidebarOpen}\">        <app-header \n          [title]=\"getHeaderTitle()\" \n          (toggleSidebar)=\"onToggleSidebar()\"\n          (goBackHome)=\"onBackHome()\">\n        </app-header>\n        \n        <main class=\"flex-1 w-full h-full overflow-auto p-6\">\n          <div class=\"flex items-center justify-between mb-6\">\n            <h2 class=\"text-xl font-medium text-gray-800 text-center w-full\">\n              {{ getPageTitle() }}\n            </h2>\n          </div>          <div class=\"max-w-full mx-auto\">\n            <!-- Show original Dashboard if view is 'mau-giao' or 'nha-tre' -->\n            <ng-container *ngIf=\"currentView === 'mau-giao' || currentView === 'nha-tre'\">\n              <app-filter-section [context]=\"getFilterContext()\" (onFilterChange)=\"handleFilterChange($event)\"></app-filter-section>\n              <app-student-table [students]=\"displayStudents\"></app-student-table>\n            </ng-container>\n\n            <!-- Show Health Dashboard -->\n            <ng-container *ngIf=\"currentView === 'sk-mau-giao' || currentView === 'sk-nha-tre'\">\n              <!-- Unified filter with context -->\n              <app-filter-section [context]=\"getFilterContext()\" (onFilterChange)=\"handleFilterChange($event)\"></app-filter-section>\n              <app-health-table [students]=\"displayStudents\"></app-health-table>\n            </ng-container>\n\n            <!-- Show Teacher Assignment if view is 'phan-cong' -->\n            <ng-container *ngIf=\"currentView === 'phan-cong'\">\n               <app-teacher-assignment></app-teacher-assignment>\n            </ng-container>\n\n          </div>\n        </main>\n      </div>\n    </div>\n  `\n})\nexport class AppComponent {\n  viewMode: 'landing' | 'app' = 'landing';\n  currentView: string = '';\n  sidebarItems: MenuItem[] = [];\n  isSidebarOpen: boolean = true;\n\n  // Data State\n  allStudents: Student[] = MOCK_STUDENTS;\n  displayStudents: Student[] = [];\n\n  onSelectModule(type: 'sbn' | 'assign' | 'health') {\n    this.viewMode = 'app';\n    // Reset sidebar state to open when entering a module\n    this.isSidebarOpen = true;\n\n    if (type === 'sbn') {\n      this.sidebarItems = MENU_SBN;\n      this.currentView = 'mau-giao';\n    } else if (type === 'health') {\n      this.sidebarItems = MENU_HEALTH;\n      this.currentView = 'sk-mau-giao';\n    } else {\n      this.sidebarItems = MENU_ASSIGNMENT;\n      this.currentView = 'phan-cong';\n    }\n    this.resetDisplayData();\n  }\n\n  onBackHome() {\n    this.viewMode = 'landing';\n    this.currentView = '';\n    this.sidebarItems = [];\n  }\n\n  onViewChange(viewId: string) {\n    this.currentView = viewId;\n    this.resetDisplayData();\n  }\n\n  resetDisplayData() {\n     // Start empty. Data is only loaded when \"Khởi tạo sổ\" is clicked\n     this.displayStudents = [];\n  }\n\n  handleFilterChange(filter: any) {\n    const context = this.getFilterContext();\n    \n    this.displayStudents = this.allStudents.filter(student => {\n       // 1. Context Filter\n       let matchContext = false;\n       if (context === 'mau-giao') {\n          matchContext = student.className.includes('Mầm') || student.className.includes('Chồi') || student.className.includes('Lá');\n       } else {\n          matchContext = student.className.includes('tháng');\n       }\n       if (!matchContext) return false;\n\n       // 2. Grade Filter\n       if (filter.grade) {\n          // If a grade is selected (e.g., \"Khối Mầm\"), check if class belongs to that grade\n          const gradeInfo = GRADE_STRUCTURE[context].find(g => g.name === filter.grade);\n          if (gradeInfo && !gradeInfo.classes.includes(student.className)) {\n             return false;\n          }\n       }\n\n       // 3. Class Filter\n       if (filter.className && student.className !== filter.className) {\n          return false;\n       }\n\n       // 4. Keyword Filter (Name or Code)\n       if (filter.keyword) {\n          const term = filter.keyword.toLowerCase();\n          if (!student.fullName.toLowerCase().includes(term) && !student.code.toLowerCase().includes(term)) {\n             return false;\n          }\n       }\n\n       // 5. Exact Code Filter\n       if (filter.code) {\n          if (!student.code.includes(filter.code) && !student.studentId.includes(filter.code)) {\n             return false;\n          }\n       }\n\n       return true;\n    });\n  }\n\n  onToggleSidebar() {\n    this.isSidebarOpen = !this.isSidebarOpen;\n  }\n\n  getFilterContext(): 'mau-giao' | 'nha-tre' {\n    if (this.currentView.includes('nha-tre')) {\n      return 'nha-tre';\n    }\n    return 'mau-giao';\n  }\n\n  // Returns title for the top header bar\n  getHeaderTitle(): string {\n    if (this.currentView === 'phan-cong') {\n      return 'Phân công giáo viên';\n    }\n    if (this.currentView.startsWith('sk-')) {\n      return 'Sổ theo dõi sức khoẻ trẻ';\n    }\n    return 'Sổ bé ngoan';\n  }\n\n  // Returns title for the page content h2\n  getPageTitle(): string {\n    switch (this.currentView) {\n      case 'mau-giao': return 'Sổ Bé Ngoan - Trẻ Mẫu Giáo';\n      case 'nha-tre': return 'Sổ Bé Ngoan - Nhà Trẻ';\n      case 'phan-cong': return 'Phân Công Giáo Viên';\n      case 'sk-mau-giao': return 'Sổ Sức khỏe Điện tử - Trẻ Mẫu Giáo';\n      case 'sk-nha-tre': return 'Sổ Sức khỏe Điện tử - Nhà Trẻ';\n      default: return 'Trang quản lý';\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}