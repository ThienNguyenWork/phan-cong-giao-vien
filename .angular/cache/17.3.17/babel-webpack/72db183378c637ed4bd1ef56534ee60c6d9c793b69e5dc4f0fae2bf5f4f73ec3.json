{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MOCK_STUDENTS, MOCK_TEACHERS } from '../constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = [\"blockSelect\"];\nconst _c1 = [\"classSelect\"];\nconst _c2 = (a0, a1) => ({\n  \"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100\": a0,\n  \"bg-white text-gray-600 border-gray-300 hover:bg-gray-50\": a1\n});\nconst _c3 = (a0, a1, a2) => ({\n  \"bg-green-50 border-green-200 text-green-800\": a0,\n  \"bg-yellow-50 border-yellow-200 text-yellow-800\": a1,\n  \"bg-red-50 border-red-200 text-red-800\": a2\n});\nconst _c4 = (a0, a1, a2) => ({\n  \"text-green-500\": a0,\n  \"text-yellow-500\": a1,\n  \"text-red-500\": a2\n});\nconst _c5 = a0 => ({\n  \"bg-blue-50\": a0\n});\nconst _c6 = a0 => ({\n  \"cursor-pointer hover:opacity-80\": a0\n});\nconst _c7 = (a0, a1) => ({\n  \"bg-blue-50 border-blue-300 shadow-sm\": a0,\n  \"bg-white border-transparent hover:bg-gray-50\": a1\n});\nconst _c8 = (a0, a1) => ({\n  \"bg-blue-600 border-blue-600 text-white\": a0,\n  \"border-gray-300 bg-white\": a1\n});\nconst _c9 = (a0, a1) => ({\n  \"text-blue-900\": a0,\n  \"text-gray-700\": a1\n});\nfunction TeacherAssignmentComponent_div_1__svg_svg_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 85);\n    i0.ɵɵelement(1, \"path\", 86)(2, \"polyline\", 87);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TeacherAssignmentComponent_div_1__svg_svg_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 85);\n    i0.ɵɵelement(1, \"path\", 88)(2, \"line\", 89)(3, \"line\", 90);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TeacherAssignmentComponent_div_1__svg_svg_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 85);\n    i0.ɵɵelement(1, \"circle\", 91)(2, \"line\", 92)(3, \"line\", 93);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TeacherAssignmentComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 78)(1, \"div\", 79);\n    i0.ɵɵtemplate(2, TeacherAssignmentComponent_div_1__svg_svg_2_Template, 3, 0, \"svg\", 80)(3, TeacherAssignmentComponent_div_1__svg_svg_3_Template, 4, 0, \"svg\", 80)(4, TeacherAssignmentComponent_div_1__svg_svg_4_Template, 4, 0, \"svg\", 80);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 81);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 82);\n    i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_div_1_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.showToast = false);\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(8, \"svg\", 70);\n    i0.ɵɵelement(9, \"line\", 83)(10, \"line\", 84);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(6, _c3, ctx_r2.toastType === \"success\", ctx_r2.toastType === \"warning\", ctx_r2.toastType === \"error\"));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(10, _c4, ctx_r2.toastType === \"success\", ctx_r2.toastType === \"warning\", ctx_r2.toastType === \"error\"));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.toastType === \"success\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.toastType === \"warning\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.toastType === \"error\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.toastMessage);\n  }\n}\nfunction TeacherAssignmentComponent_optgroup_59_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 96);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cls_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cls_r4);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(cls_r4);\n  }\n}\nfunction TeacherAssignmentComponent_optgroup_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"optgroup\", 94);\n    i0.ɵɵtemplate(1, TeacherAssignmentComponent_optgroup_59_option_1_Template, 2, 2, \"option\", 95);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const group_r5 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"label\", group_r5.label);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", group_r5.classes)(\"ngForTrackBy\", ctx_r2.trackByClass);\n  }\n}\nfunction TeacherAssignmentComponent_tr_82_ng_container_12_span_1_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 108);\n    i0.ɵɵtext(1, \"CN\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TeacherAssignmentComponent_tr_82_ng_container_12_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 106)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, TeacherAssignmentComponent_tr_82_ng_container_12_span_1_span_3_Template, 2, 0, \"span\", 107);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const t_r8 = ctx.$implicit;\n    const student_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"ngClass\", student_r7.homeroomTeacherId === t_r8.id ? \"bg-red-100 text-red-800 border border-red-200\" : \"bg-blue-100 text-blue-800 border border-blue-200\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(t_r8.shortName);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", student_r7.homeroomTeacherId === t_r8.id);\n  }\n}\nfunction TeacherAssignmentComponent_tr_82_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TeacherAssignmentComponent_tr_82_ng_container_12_span_1_Template, 4, 3, \"span\", 105);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const student_r7 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.getAssignedTeachers(student_r7));\n  }\n}\nfunction TeacherAssignmentComponent_tr_82_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 109);\n    i0.ɵɵtext(1, \"-\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TeacherAssignmentComponent_tr_82_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 97)(1, \"td\", 98);\n    i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_tr_82_Template_td_click_1_listener() {\n      const student_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleStudent(student_r7.id));\n    });\n    i0.ɵɵelementStart(2, \"input\", 47);\n    i0.ɵɵlistener(\"change\", function TeacherAssignmentComponent_tr_82_Template_input_change_2_listener() {\n      const student_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleStudent(student_r7.id));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"td\", 98);\n    i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_tr_82_Template_td_click_3_listener() {\n      const student_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleStudent(student_r7.id));\n    });\n    i0.ɵɵelementStart(4, \"div\", 99);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 100);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\", 101);\n    i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_tr_82_Template_td_click_8_listener() {\n      const student_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleStudent(student_r7.id));\n    });\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 102)(11, \"div\", 103);\n    i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_tr_82_Template_div_click_11_listener() {\n      const student_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.openTeacherDetails(student_r7));\n    });\n    i0.ɵɵtemplate(12, TeacherAssignmentComponent_tr_82_ng_container_12_Template, 2, 1, \"ng-container\", 104)(13, TeacherAssignmentComponent_tr_82_ng_template_13_Template, 2, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const student_r7 = ctx.$implicit;\n    const noTeacher_r9 = i0.ɵɵreference(14);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c5, ctx_r2.selectedStudentIds.has(student_r7.id)));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", ctx_r2.selectedStudentIds.has(student_r7.id));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(student_r7.fullName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(student_r7.code);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", student_r7.className, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c6, ctx_r2.getAssignedTeachers(student_r7).length > 0));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.getAssignedTeachers(student_r7).length > 0)(\"ngIfElse\", noTeacher_r9);\n  }\n}\nfunction TeacherAssignmentComponent_tr_83_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 110);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.showUnassignedOnly ? \"Tuy\\u1EC7t v\\u1EDDi! T\\u1EA5t c\\u1EA3 h\\u1ECDc sinh \\u0111\\u1EC1u \\u0111\\u00E3 c\\u00F3 gi\\u00E1o vi\\u00EAn.\" : \"Kh\\u00F4ng t\\u00ECm th\\u1EA5y h\\u1ECDc sinh ph\\u00F9 h\\u1EE3p\", \" \");\n  }\n}\nfunction TeacherAssignmentComponent_label_101__svg_svg_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 119);\n    i0.ɵɵelement(1, \"polyline\", 120);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TeacherAssignmentComponent_label_101_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\", 111)(1, \"input\", 112);\n    i0.ɵɵlistener(\"change\", function TeacherAssignmentComponent_label_101_Template_input_change_1_listener() {\n      const teacher_r11 = i0.ɵɵrestoreView(_r10).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleTeacherSelection(teacher_r11.id));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 113);\n    i0.ɵɵtemplate(3, TeacherAssignmentComponent_label_101__svg_svg_3_Template, 2, 0, \"svg\", 114);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 115)(5, \"div\", 116);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 117);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 118);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const teacher_r11 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(8, _c7, ctx_r2.isTeacherSelected(teacher_r11.id), !ctx_r2.isTeacherSelected(teacher_r11.id)));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"checked\", ctx_r2.isTeacherSelected(teacher_r11.id));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(11, _c8, ctx_r2.isTeacherSelected(teacher_r11.id), !ctx_r2.isTeacherSelected(teacher_r11.id)));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isTeacherSelected(teacher_r11.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(14, _c9, ctx_r2.isTeacherSelected(teacher_r11.id), !ctx_r2.isTeacherSelected(teacher_r11.id)));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(teacher_r11.shortName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(teacher_r11.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"ID: \", teacher_r11.cccd.slice(-4), \"\");\n  }\n}\nfunction TeacherAssignmentComponent_div_102_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 121);\n    i0.ɵɵtext(1, \" Kh\\u00F4ng t\\u00ECm th\\u1EA5y gi\\u00E1o vi\\u00EAn \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TeacherAssignmentComponent_div_134_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 134)(1, \"div\", 135);\n    i0.ɵɵelement(2, \"img\", 136);\n    i0.ɵɵelementStart(3, \"div\")(4, \"h4\", 137);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 138);\n    i0.ɵɵtext(7, \"\\u0110ang d\\u1EA1y\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 139)(9, \"div\", 140)(10, \"span\", 141);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(11, \"svg\", 70);\n    i0.ɵɵelement(12, \"rect\", 142)(13, \"line\", 143)(14, \"line\", 144)(15, \"line\", 145);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(16, \"span\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"span\", 146);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 140)(21, \"span\", 141);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(22, \"svg\", 70);\n    i0.ɵɵelement(23, \"rect\", 147)(24, \"path\", 148)(25, \"path\", 149)(26, \"path\", 150);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(27, \"span\", 151);\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"div\", 140)(30, \"span\", 141);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(31, \"svg\", 70);\n    i0.ɵɵelement(32, \"path\", 152);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(33, \"span\");\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"div\", 153)(36, \"span\", 154);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(37, \"svg\", 70);\n    i0.ɵɵelement(38, \"path\", 155)(39, \"circle\", 156);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(40, \"span\", 157);\n    i0.ɵɵtext(41);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(42, \"div\", 158)(43, \"button\", 159);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(44, \"svg\", 70);\n    i0.ɵɵelement(45, \"path\", 152);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(46, \" G\\u1ECDi \\u0111i\\u1EC7n \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const teacher_r14 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", teacher_r14.avatar, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(teacher_r14.name);\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate(teacher_r14.dob);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(teacher_r14.gender);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\"CCCD: \", teacher_r14.cccd, \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(teacher_r14.phone);\n    i0.ɵɵadvance(6);\n    i0.ɵɵpropertyInterpolate(\"title\", teacher_r14.address);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(teacher_r14.address);\n  }\n}\nfunction TeacherAssignmentComponent_div_134_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 122)(1, \"div\", 123);\n    i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_div_134_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeTeacherDetails());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 124)(3, \"div\", 125)(4, \"div\")(5, \"h3\", 126);\n    i0.ɵɵtext(6, \"Gi\\u00E1o vi\\u00EAn ph\\u1EE5 tr\\u00E1ch\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 127);\n    i0.ɵɵtext(8, \"H\\u1ECDc sinh: \");\n    i0.ɵɵelementStart(9, \"span\", 128);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"button\", 129);\n    i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_div_134_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeTeacherDetails());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(12, \"svg\", 130);\n    i0.ɵɵelement(13, \"line\", 83)(14, \"line\", 84);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(15, \"div\", 131)(16, \"div\", 132);\n    i0.ɵɵtemplate(17, TeacherAssignmentComponent_div_134_div_17_Template, 47, 8, \"div\", 133);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(ctx_r2.viewingStudentDetails.fullName);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.viewingTeachers);\n  }\n}\nexport let TeacherAssignmentComponent = /*#__PURE__*/(() => {\n  class TeacherAssignmentComponent {\n    constructor(elementRef) {\n      this.elementRef = elementRef;\n      // Use MOCK_STUDENTS direct reference to ensure synchronization across modules\n      this.students = MOCK_STUDENTS;\n      this.teachers = MOCK_TEACHERS;\n      this.filteredStudents = [];\n      this.filteredTeachers = [];\n      // ... rest of the code remains same, logic for references is updated by removing JSON.parse/stringify ...\n      this.selectedStudentIds = new Set();\n      this.selectedTeacherIds = new Set();\n      // Filter States\n      this.studentSearchTerm = '';\n      this.blockFilter = ''; // Khối: 'Mầm' | 'Chồi' | 'Lá' | '6-18' | '19-24' | '25-36' | ''\n      this.classFilter = ''; // Lớp cụ thể: 'Mầm 1', 'Mầm 2', 'Chồi 1', ...\n      this.teacherSearchTerm = '';\n      // New state for unassigned filter\n      this.showUnassignedOnly = false;\n      // If true, applied teacher(s) will set homeroom for selected students\n      this.assignAsHomeroom = false;\n      // Modal State\n      this.viewingStudentDetails = null;\n      this.viewingTeachers = [];\n      // Toast Notification State\n      this.showToast = false;\n      this.toastMessage = '';\n      this.toastType = 'success';\n      this.applyStudentFilters();\n      this.filteredTeachers = [...this.teachers];\n    }\n    // Helper to show notification\n    showNotification(message, type = 'success') {\n      this.toastMessage = message;\n      this.toastType = type;\n      this.showToast = true;\n      setTimeout(() => {\n        this.showToast = false;\n      }, 3000);\n    }\n    // Helper to count total unassigned students\n    get unassignedCount() {\n      return this.students.filter(s => !s.assignedTeacherIds || s.assignedTeacherIds.length === 0).length;\n    }\n    toggleUnassignedFilter() {\n      this.showUnassignedOnly = !this.showUnassignedOnly;\n      this.applyStudentFilters();\n    }\n    // --- Student Filters ---\n    onStudentSearch(event) {\n      this.studentSearchTerm = event.target.value.toLowerCase();\n      this.applyStudentFilters();\n    }\n    onBlockFilterChange(event) {\n      this.blockFilter = event.target.value;\n      this.classFilter = ''; // Reset class filter when block changes\n      this.applyStudentFilters();\n    }\n    onClassFilterChange(event) {\n      this.classFilter = event.target.value;\n      // Auto-update blockFilter based on selected class\n      if (this.classFilter) {\n        if (this.classFilter.includes('Mầm')) {\n          this.blockFilter = 'Mầm';\n        } else if (this.classFilter.includes('Chồi')) {\n          this.blockFilter = 'Chồi';\n        } else if (this.classFilter.includes('Lá')) {\n          this.blockFilter = 'Lá';\n        } else if (this.classFilter.includes('6-18')) {\n          this.blockFilter = '6-18';\n        } else if (this.classFilter.includes('19-24')) {\n          this.blockFilter = '19-24';\n        } else if (this.classFilter.includes('25-36')) {\n          this.blockFilter = '25-36';\n        }\n        // Force update blockSelect to show the new value\n        if (this.blockSelect) {\n          this.blockSelect.nativeElement.value = this.blockFilter;\n        }\n      }\n      this.applyStudentFilters();\n    }\n    // Get available classes based on current block filter\n    getAvailableClasses() {\n      const allClasses = [...new Set(this.students.map(s => s.className))].sort();\n      if (!this.blockFilter) return allClasses;\n      // Filter by block prefix (e.g., 'Mầm' includes 'Mầm 1', 'Mầm 2')\n      return allClasses.filter(c => c.startsWith(this.blockFilter));\n    }\n    // Get grouped classes for template\n    getGroupedClasses() {\n      const allClasses = [...new Set(this.students.map(s => s.className))].sort();\n      // If blockFilter is set, only show classes in that block\n      let filteredClasses = allClasses;\n      if (this.blockFilter) {\n        filteredClasses = allClasses.filter(c => c.startsWith(this.blockFilter));\n      }\n      const mauGiao = filteredClasses.filter(c => c.includes('Mầm') || c.includes('Chồi') || c.includes('Lá'));\n      const nhaTre = filteredClasses.filter(c => c.includes('6-18') || c.includes('19-24') || c.includes('25-36'));\n      const groups = [];\n      if (mauGiao.length > 0) {\n        groups.push({\n          label: 'Mẫu Giáo',\n          classes: mauGiao\n        });\n      }\n      if (nhaTre.length > 0) {\n        groups.push({\n          label: 'Nhà Trẻ',\n          classes: nhaTre\n        });\n      }\n      return groups;\n    }\n    // TrackBy for ngFor to preserve DOM\n    trackByGroupLabel(index, item) {\n      return item.label;\n    }\n    trackByClass(index, cls) {\n      return cls;\n    }\n    getClassPriority(className) {\n      if (className.includes('Mầm')) return 1;\n      if (className.includes('Chồi')) return 2;\n      if (className.includes('Lá')) return 3;\n      if (className.includes('6-18')) return 4;\n      if (className.includes('19-24')) return 5;\n      if (className.includes('25-36')) return 6;\n      return 99; // Các lớp khác (nếu có)\n    }\n    applyStudentFilters() {\n      // 1. Filter\n      let result = this.students.filter(s => {\n        const matchesSearch = s.fullName.toLowerCase().includes(this.studentSearchTerm) || s.code.toLowerCase().includes(this.studentSearchTerm);\n        // Filter by block first (e.g., 'Mầm' matches 'Mầm 1', 'Mầm 2')\n        let matchesBlock = true;\n        if (this.blockFilter) {\n          matchesBlock = s.className.startsWith(this.blockFilter);\n        }\n        // Then filter by specific class (exact match)\n        const matchesClass = this.classFilter ? s.className === this.classFilter : true;\n        const isUnassigned = !s.assignedTeacherIds || s.assignedTeacherIds.length === 0;\n        const matchesUnassigned = this.showUnassignedOnly ? isUnassigned : true;\n        return matchesSearch && matchesBlock && matchesClass && matchesUnassigned;\n      });\n      // 2. Sort: Mầm -> Chồi -> Lá -> 6-18 -> 19-24 -> 25-36\n      result.sort((a, b) => {\n        const priorityA = this.getClassPriority(a.className);\n        const priorityB = this.getClassPriority(b.className);\n        if (priorityA !== priorityB) {\n          return priorityA - priorityB;\n        }\n        return a.className.localeCompare(b.className);\n      });\n      this.filteredStudents = result;\n    }\n    // --- Teacher Search ---\n    onTeacherSearch(event) {\n      this.teacherSearchTerm = event.target.value.toLowerCase();\n      this.filteredTeachers = this.teachers.filter(t => t.name.toLowerCase().includes(this.teacherSearchTerm) || t.shortName.toLowerCase().includes(this.teacherSearchTerm) || t.cccd.includes(this.teacherSearchTerm));\n    }\n    // --- Student Selection Logic ---\n    toggleStudent(id) {\n      if (this.selectedStudentIds.has(id)) {\n        this.selectedStudentIds.delete(id);\n      } else {\n        this.selectedStudentIds.add(id);\n      }\n    }\n    toggleSelectAll() {\n      if (this.isAllSelected()) {\n        this.selectedStudentIds.clear();\n      } else {\n        this.filteredStudents.forEach(s => this.selectedStudentIds.add(s.id));\n      }\n    }\n    isAllSelected() {\n      return this.filteredStudents.length > 0 && this.selectedStudentIds.size === this.filteredStudents.length;\n    }\n    // --- Teacher Selection Logic ---\n    toggleTeacherSelection(teacherId) {\n      if (this.selectedTeacherIds.has(teacherId)) {\n        this.selectedTeacherIds.delete(teacherId);\n      } else {\n        this.selectedTeacherIds.add(teacherId);\n      }\n    }\n    isTeacherSelected(teacherId) {\n      return this.selectedTeacherIds.has(teacherId);\n    }\n    // --- Main Actions ---\n    applyAssignment() {\n      if (this.selectedStudentIds.size === 0 || this.selectedTeacherIds.size === 0) return;\n      const teachersToAdd = Array.from(this.selectedTeacherIds);\n      // If assigning as homeroom, ensure only one teacher is selected\n      if (this.assignAsHomeroom && teachersToAdd.length > 1) {\n        this.showNotification('Chỉ có thể chọn 1 giáo viên làm chủ nhiệm. Vui lòng chọn 1 giáo viên.', 'warning');\n        // Uncheck the homeroom toggle immediately\n        this.assignAsHomeroom = false;\n        return;\n      }\n      let countSuccess = 0;\n      let hasError = false;\n      this.students.forEach(student => {\n        if (this.selectedStudentIds.has(student.id)) {\n          if (!student.assignedTeacherIds) student.assignedTeacherIds = [];\n          let added = false;\n          for (const newId of teachersToAdd) {\n            // If not assigning as homeroom and the teacher is already the student's homeroom, warn and skip\n            if (!this.assignAsHomeroom && student.homeroomTeacherId && newId === student.homeroomTeacherId) {\n              const teacher = this.teachers.find(t => t.id === newId);\n              if (teacher) {\n                this.showNotification(`Giáo viên ${teacher.shortName} đã được phân làm giáo viên chủ nhiệm cho học sinh ${student.fullName}.`, 'warning');\n              }\n              continue;\n            }\n            if (!student.assignedTeacherIds.includes(newId)) {\n              student.assignedTeacherIds.push(newId);\n              added = true;\n            }\n          }\n          // If assigning as homeroom, set homeroomTeacherId to the first selected teacher\n          if (this.assignAsHomeroom && teachersToAdd.length > 0) {\n            const homeroomTeacherId = teachersToAdd[0];\n            const homeroomTeacher = this.teachers.find(t => t.id === homeroomTeacherId);\n            // Check if this teacher is already homeroom of another class\n            const existingClass = this.getHomeroomClassForTeacher(homeroomTeacherId);\n            if (existingClass && existingClass !== student.className) {\n              const teacherName = homeroomTeacher?.shortName || 'Giáo viên';\n              this.showNotification(`${teacherName} đã là giáo viên chủ nhiệm của lớp ${existingClass}. Một giáo viên chỉ có thể chủ nhiệm 1 lớp.`, 'error');\n              hasError = true;\n              // Reset homeroom toggle when error occurs\n              this.assignAsHomeroom = false;\n              return; // Stop assignment for this student\n            }\n            // pick first selected teacher as homeroom\n            student.homeroomTeacherId = homeroomTeacherId;\n            // ensure homeroom teacher is included in assignedTeacherIds\n            if (!student.assignedTeacherIds.includes(homeroomTeacherId)) {\n              student.assignedTeacherIds.push(homeroomTeacherId);\n              added = true;\n            }\n          }\n          if (added) countSuccess++;\n        }\n      });\n      this.applyStudentFilters(); // Refresh UI\n      this.selectedTeacherIds.clear(); // Reset Teacher checkboxes\n      this.selectedStudentIds.clear(); // Reset Student checkboxes\n      // Reset the homeroom assignment toggle after applying\n      this.assignAsHomeroom = false;\n      // Only show success message if there was no error and assignments were made\n      if (!hasError && countSuccess > 0) {\n        this.showNotification(`Đã phân công thành công cho ${countSuccess} học sinh!`, 'success');\n      }\n    }\n    removeAssignment() {\n      if (this.selectedStudentIds.size === 0 || this.selectedTeacherIds.size === 0) return;\n      const teachersToRemove = Array.from(this.selectedTeacherIds);\n      let changeCount = 0;\n      this.students.forEach(student => {\n        if (this.selectedStudentIds.has(student.id) && student.assignedTeacherIds) {\n          const originalLength = student.assignedTeacherIds.length;\n          student.assignedTeacherIds = student.assignedTeacherIds.filter(existingId => !teachersToRemove.includes(existingId));\n          // If homeroom teacher removed, clear homeroomTeacherId\n          if (student.homeroomTeacherId && teachersToRemove.includes(student.homeroomTeacherId)) {\n            student.homeroomTeacherId = undefined;\n          }\n          if (student.assignedTeacherIds.length !== originalLength) {\n            changeCount++;\n          }\n        }\n      });\n      if (changeCount === 0) {\n        this.showNotification('Các học sinh đã chọn chưa được phân công bởi giáo viên này.', 'warning');\n        return;\n      }\n      this.applyStudentFilters(); // Refresh UI\n      this.selectedTeacherIds.clear(); // Reset Teacher checkboxes\n      this.selectedStudentIds.clear(); // Reset Student checkboxes\n      this.showNotification(`Đã gỡ phân công thành công cho ${changeCount} học sinh.`, 'success');\n    }\n    // --- Helpers ---\n    getAssignedTeachers(student) {\n      if (!student.assignedTeacherIds) return [];\n      return this.teachers.filter(t => student.assignedTeacherIds.includes(t.id));\n    }\n    // Check if a teacher is already homeroom of another class\n    getHomeroomClassForTeacher(teacherId) {\n      const student = this.students.find(s => s.homeroomTeacherId === teacherId);\n      return student ? student.className : null;\n    }\n    // Toggle handler for homeroom checkbox — validate selection\n    onHomeroomToggle(checked, checkboxElement) {\n      if (checked && this.selectedTeacherIds.size > 1) {\n        this.showNotification('Chỉ có thể chọn 1 giáo viên làm chủ nhiệm. Vui lòng chọn 1 giáo viên.', 'warning');\n        this.assignAsHomeroom = false;\n        // Force uncheck the checkbox immediately\n        if (checkboxElement) {\n          checkboxElement.checked = false;\n        }\n        return;\n      }\n      this.assignAsHomeroom = checked;\n    }\n    // --- Details Modal Logic ---\n    openTeacherDetails(student) {\n      const assigned = this.getAssignedTeachers(student);\n      if (assigned.length === 0) return;\n      this.viewingStudentDetails = student;\n      this.viewingTeachers = assigned;\n    }\n    closeTeacherDetails() {\n      this.viewingStudentDetails = null;\n      this.viewingTeachers = [];\n    }\n    static {\n      this.ɵfac = function TeacherAssignmentComponent_Factory(t) {\n        return new (t || TeacherAssignmentComponent)(i0.ɵɵdirectiveInject(ElementRef));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: TeacherAssignmentComponent,\n        selectors: [[\"app-teacher-assignment\"]],\n        viewQuery: function TeacherAssignmentComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n            i0.ɵɵviewQuery(_c1, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.blockSelect = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.classSelect = _t.first);\n          }\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 135,\n        vars: 24,\n        consts: [[\"blockSelect\", \"\"], [\"classSelect\", \"\"], [\"homeroomCheckbox\", \"\"], [\"noTeacher\", \"\"], [1, \"flex\", \"flex-col\", \"lg:flex-row\", \"gap-6\", \"h-[calc(100vh-140px)]\", \"relative\"], [\"class\", \"absolute top-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg border animate-in fade-in slide-in-from-top-4 duration-300\", 3, \"ngClass\", 4, \"ngIf\"], [1, \"flex-1\", \"bg-white\", \"rounded-lg\", \"shadow-sm\", \"border\", \"border-gray-200\", \"flex\", \"flex-col\", \"overflow-hidden\"], [1, \"p-4\", \"border-b\", \"border-gray-200\", \"bg-gray-50\", \"flex\", \"flex-col\", \"gap-3\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"font-semibold\", \"text-gray-800\"], [1, \"flex\", \"items-center\", \"gap-3\"], [1, \"flex\", \"items-center\", \"gap-1.5\", \"px-3\", \"py-1\", \"rounded-full\", \"text-xs\", \"font-medium\", \"bg-blue-50\", \"text-blue-700\", \"border\", \"border-blue-100\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"14\", \"height\", \"14\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"d\", \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"], [\"cx\", \"9\", \"cy\", \"7\", \"r\", \"4\"], [\"d\", \"M22 21v-2a4 4 0 0 0-3-3.87\"], [\"d\", \"M16 3.13a4 4 0 0 1 0 7.75\"], [1, \"h-4\", \"w-px\", \"bg-gray-300\"], [1, \"flex\", \"items-center\", \"gap-2\", \"px-3\", \"py-1\", \"rounded-full\", \"text-xs\", \"font-medium\", \"border\", \"transition-colors\", \"shadow-sm\", 3, \"click\", \"ngClass\"], [1, \"w-2\", \"h-2\", \"rounded-full\", 3, \"ngClass\"], [1, \"text-xs\", \"text-gray-500\"], [1, \"font-bold\", \"text-blue-600\"], [1, \"flex\", \"gap-3\"], [1, \"relative\", \"w-40\"], [1, \"w-full\", \"pl-2\", \"pr-8\", \"py-1.5\", \"border\", \"border-gray-300\", \"rounded\", \"text-sm\", \"focus:ring-1\", \"focus:ring-blue-500\", \"outline-none\", \"appearance-none\", \"bg-white\", 3, \"change\", \"value\"], [\"value\", \"\"], [\"label\", \"M\\u1EABu Gi\\u00E1o\"], [\"value\", \"M\\u1EA7m\"], [\"value\", \"Ch\\u1ED3i\"], [\"value\", \"L\\u00E1\"], [\"label\", \"Nh\\u00E0 Tr\\u1EBB\"], [\"value\", \"6-18\"], [\"value\", \"19-24\"], [\"value\", \"25-36\"], [1, \"absolute\", \"right-2\", \"top-1/2\", \"-translate-y-1/2\", \"pointer-events-none\", \"text-gray-400\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"12\", \"height\", \"12\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"d\", \"m6 9 6 6 6-6\"], [3, \"label\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"relative\", \"flex-1\"], [\"type\", \"text\", \"placeholder\", \"T\\u00ECm t\\u00EAn ho\\u1EB7c m\\u00E3 s\\u1ED1...\", 1, \"pl-9\", \"pr-4\", \"py-1.5\", \"w-full\", \"border\", \"border-gray-300\", \"rounded\", \"text-sm\", \"focus:ring-1\", \"focus:ring-blue-500\", \"outline-none\", 3, \"input\"], [1, \"absolute\", \"left-3\", \"top-1/2\", \"-translate-y-1/2\", \"text-gray-400\"], [\"cx\", \"11\", \"cy\", \"11\", \"r\", \"8\"], [\"d\", \"m21 21-4.3-4.3\"], [1, \"flex-1\", \"overflow-auto\"], [1, \"w-full\", \"text-left\", \"border-collapse\"], [1, \"bg-white\", \"sticky\", \"top-0\", \"z-10\", \"shadow-sm\", \"text-xs\", \"font-semibold\", \"text-gray-500\", \"uppercase\"], [1, \"px-4\", \"py-3\", \"border-b\", \"w-10\", \"bg-gray-50\"], [\"type\", \"checkbox\", 1, \"w-4\", \"h-4\", \"rounded\", \"border-gray-300\", \"text-blue-600\", \"focus:ring-blue-500\", \"cursor-pointer\", 3, \"change\", \"checked\"], [1, \"px-4\", \"py-3\", \"border-b\", \"bg-gray-50\"], [1, \"divide-y\", \"divide-gray-100\"], [\"class\", \"hover:bg-blue-50/40 transition-colors\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"w-full\", \"lg:w-80\", \"bg-white\", \"rounded-lg\", \"shadow-sm\", \"border\", \"border-gray-200\", \"flex\", \"flex-col\"], [1, \"p-4\", \"border-b\", \"border-gray-200\", \"bg-blue-50\", \"rounded-t-lg\"], [1, \"font-semibold\", \"text-blue-900\", \"flex\", \"items-center\", \"gap-2\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"18\", \"height\", \"18\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [1, \"mt-3\", \"relative\"], [\"type\", \"text\", \"placeholder\", \"T\\u00ECm t\\u00EAn ho\\u1EB7c CCCD...\", 1, \"w-full\", \"pl-8\", \"pr-3\", \"py-1.5\", \"border\", \"border-blue-200\", \"rounded\", \"text-sm\", \"focus:ring-1\", \"focus:ring-blue-500\", \"outline-none\", \"bg-white\", 3, \"input\"], [1, \"absolute\", \"left-2.5\", \"top-1/2\", \"-translate-y-1/2\", \"text-blue-400\"], [1, \"flex-1\", \"overflow-y-auto\", \"p-2\"], [1, \"space-y-1\"], [\"class\", \"flex items-center p-3 rounded-lg border transition-all cursor-pointer select-none group\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center p-4 text-xs text-gray-500 italic\", 4, \"ngIf\"], [1, \"p-4\", \"border-t\", \"border-gray-200\", \"bg-gray-50\", \"rounded-b-lg\", \"space-y-3\"], [1, \"flex\", \"items-center\", \"justify-between\", \"text-xs\", \"text-gray-600\", \"mb-1\"], [1, \"flex\", \"items-center\", \"gap-3\", \"text-sm\"], [1, \"flex\", \"items-center\", \"gap-2\", \"text-gray-700\"], [\"type\", \"checkbox\", 1, \"w-4\", \"h-4\", 3, \"change\", \"checked\"], [1, \"text-xs\", \"text-red-600\", \"font-medium\"], [1, \"w-full\", \"flex\", \"items-center\", \"justify-center\", \"gap-2\", \"bg-blue-600\", \"hover:bg-blue-700\", \"disabled:bg-gray-300\", \"disabled:cursor-not-allowed\", \"text-white\", \"font-medium\", \"py-2.5\", \"px-4\", \"rounded\", \"shadow-sm\", \"transition-all\", \"text-sm\", 3, \"click\", \"disabled\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"d\", \"M5 12h14\"], [\"d\", \"M12 5v14\"], [1, \"w-full\", \"flex\", \"items-center\", \"justify-center\", \"gap-2\", \"bg-white\", \"border\", \"border-red-200\", \"text-red-600\", \"hover:bg-red-50\", \"disabled:bg-gray-50\", \"disabled:text-gray-300\", \"disabled:border-gray-200\", \"font-medium\", \"py-2.5\", \"px-4\", \"rounded\", \"transition-all\", \"text-sm\", 3, \"click\", \"disabled\"], [\"d\", \"M3 6h18\"], [\"d\", \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"], [\"d\", \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"], [\"class\", \"absolute inset-0 z-50 flex items-center justify-center\", 4, \"ngIf\"], [1, \"absolute\", \"top-4\", \"left-1/2\", \"-translate-x-1/2\", \"z-50\", \"flex\", \"items-center\", \"gap-3\", \"px-4\", \"py-3\", \"rounded-lg\", \"shadow-lg\", \"border\", \"animate-in\", \"fade-in\", \"slide-in-from-top-4\", \"duration-300\", 3, \"ngClass\"], [3, \"ngClass\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 4, \"ngIf\"], [1, \"text-sm\", \"font-medium\"], [1, \"ml-2\", \"hover:opacity-70\", 3, \"click\"], [\"x1\", \"18\", \"y1\", \"6\", \"x2\", \"6\", \"y2\", \"18\"], [\"x1\", \"6\", \"y1\", \"6\", \"x2\", \"18\", \"y2\", \"18\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"d\", \"M22 11.08V12a10 10 0 1 1-5.93-9.14\"], [\"points\", \"22 4 12 14.01 9 11.01\"], [\"d\", \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"], [\"x1\", \"12\", \"y1\", \"9\", \"x2\", \"12\", \"y2\", \"13\"], [\"x1\", \"12\", \"y1\", \"17\", \"x2\", \"12.01\", \"y2\", \"17\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"10\"], [\"x1\", \"15\", \"y1\", \"9\", \"x2\", \"9\", \"y2\", \"15\"], [\"x1\", \"9\", \"y1\", \"9\", \"x2\", \"15\", \"y2\", \"15\"], [3, \"label\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [3, \"value\"], [1, \"hover:bg-blue-50/40\", \"transition-colors\", 3, \"ngClass\"], [1, \"px-4\", \"py-3\", \"cursor-pointer\", 3, \"click\"], [1, \"font-medium\", \"text-gray-800\", \"text-sm\"], [1, \"text-xs\", \"text-gray-500\", \"font-mono\"], [1, \"px-4\", \"py-3\", \"cursor-pointer\", \"text-sm\", \"text-gray-600\", 3, \"click\"], [1, \"px-4\", \"py-3\"], [1, \"grid\", \"grid-cols-3\", \"gap-1.5\", \"w-fit\", 3, \"click\", \"ngClass\"], [4, \"ngIf\", \"ngIfElse\"], [\"class\", \"inline-flex items-center justify-center px-2 py-0.5 rounded text-xs font-medium truncate whitespace-nowrap\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"inline-flex\", \"items-center\", \"justify-center\", \"px-2\", \"py-0.5\", \"rounded\", \"text-xs\", \"font-medium\", \"truncate\", \"whitespace-nowrap\", 3, \"ngClass\"], [\"class\", \"ml-1 text-[10px] font-bold bg-red-600 text-white px-1 rounded\", 4, \"ngIf\"], [1, \"ml-1\", \"text-[10px]\", \"font-bold\", \"bg-red-600\", \"text-white\", \"px-1\", \"rounded\"], [1, \"text-gray-400\", \"select-none\"], [\"colspan\", \"4\", 1, \"p-8\", \"text-center\", \"text-gray-500\", \"text-sm\"], [1, \"flex\", \"items-center\", \"p-3\", \"rounded-lg\", \"border\", \"transition-all\", \"cursor-pointer\", \"select-none\", \"group\", 3, \"ngClass\"], [\"type\", \"checkbox\", 1, \"hidden\", 3, \"change\", \"checked\"], [1, \"flex\", \"items-center\", \"justify-center\", \"w-5\", \"h-5\", \"rounded\", \"border\", \"mr-3\", \"transition-colors\", \"shrink-0\", 3, \"ngClass\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"12\", \"height\", \"12\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"3\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 4, \"ngIf\"], [1, \"flex-1\", \"min-w-0\"], [1, \"text-sm\", \"font-medium\", \"truncate\", 3, \"ngClass\"], [1, \"text-xs\", \"text-gray-500\", \"truncate\"], [1, \"text-[10px]\", \"text-gray-400\", \"font-mono\", \"mt-0.5\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"12\", \"height\", \"12\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"3\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\"], [\"points\", \"20 6 9 17 4 12\"], [1, \"text-center\", \"p-4\", \"text-xs\", \"text-gray-500\", \"italic\"], [1, \"absolute\", \"inset-0\", \"z-50\", \"flex\", \"items-center\", \"justify-center\"], [1, \"absolute\", \"inset-0\", \"bg-black/40\", \"backdrop-blur-sm\", 3, \"click\"], [1, \"relative\", \"bg-white\", \"rounded-xl\", \"shadow-2xl\", \"w-[90%]\", \"max-w-4xl\", \"max-h-[90%]\", \"flex\", \"flex-col\", \"overflow-hidden\", \"animate-in\", \"fade-in\", \"zoom-in\", \"duration-200\"], [1, \"p-4\", \"border-b\", \"border-gray-100\", \"flex\", \"items-center\", \"justify-between\", \"bg-gray-50\"], [1, \"font-bold\", \"text-gray-800\", \"text-lg\"], [1, \"text-sm\", \"text-gray-500\"], [1, \"font-semibold\", \"text-blue-600\"], [1, \"p-2\", \"hover:bg-gray-200\", \"rounded-full\", \"transition-colors\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"text-gray-500\"], [1, \"p-6\", \"overflow-y-auto\", \"bg-gray-50/50\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-2\", \"lg:grid-cols-3\", \"gap-6\"], [\"class\", \"bg-white rounded-xl border border-gray-200 shadow-sm p-5 hover:shadow-md transition-shadow relative group\", 4, \"ngFor\", \"ngForOf\"], [1, \"bg-white\", \"rounded-xl\", \"border\", \"border-gray-200\", \"shadow-sm\", \"p-5\", \"hover:shadow-md\", \"transition-shadow\", \"relative\", \"group\"], [1, \"flex\", \"items-start\", \"gap-4\", \"mb-4\"], [\"alt\", \"Avatar\", 1, \"w-12\", \"h-12\", \"rounded-full\", \"border\", \"border-gray-100\", \"bg-gray-50\", \"object-cover\", 3, \"src\"], [1, \"font-bold\", \"text-gray-800\", \"text-base\", \"uppercase\", \"leading-tight\"], [1, \"inline-block\", \"mt-1\", \"px-2\", \"py-0.5\", \"bg-green-50\", \"text-green-700\", \"text-[10px]\", \"font-bold\", \"uppercase\", \"rounded\", \"border\", \"border-green-100\"], [1, \"space-y-3\", \"mb-5\"], [1, \"flex\", \"items-center\", \"gap-3\", \"text-sm\", \"text-gray-600\"], [1, \"w-5\", \"text-center\", \"text-gray-400\"], [\"width\", \"18\", \"height\", \"18\", \"x\", \"3\", \"y\", \"4\", \"rx\", \"2\", \"ry\", \"2\"], [\"x1\", \"16\", \"x2\", \"16\", \"y1\", \"2\", \"y2\", \"6\"], [\"x1\", \"8\", \"x2\", \"8\", \"y1\", \"2\", \"y2\", \"6\"], [\"x1\", \"3\", \"x2\", \"21\", \"y1\", \"10\", \"y2\", \"10\"], [1, \"bg-blue-50\", \"text-blue-700\", \"px-2\", \"rounded-full\", \"text-xs\", \"font-medium\"], [\"width\", \"20\", \"height\", \"14\", \"x\", \"2\", \"y\", \"5\", \"rx\", \"2\"], [\"d\", \"M2 10h20\"], [\"d\", \"M7 15h.01\"], [\"d\", \"M17 15h.01\"], [1, \"font-medium\", \"text-gray-800\"], [\"d\", \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\"], [1, \"flex\", \"items-start\", \"gap-3\", \"text-sm\", \"text-gray-600\"], [1, \"w-5\", \"text-center\", \"text-gray-400\", \"mt-0.5\"], [\"d\", \"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z\"], [\"cx\", \"12\", \"cy\", \"10\", \"r\", \"3\"], [1, \"text-xs\", \"leading-relaxed\", \"line-clamp-2\", 3, \"title\"], [1, \"flex\", \"gap-2\", \"mt-auto\"], [1, \"flex-1\", \"flex\", \"items-center\", \"justify-center\", \"gap-2\", \"border\", \"border-gray-300\", \"rounded\", \"py-2\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"hover:bg-gray-50\", \"transition-colors\"]],\n        template: function TeacherAssignmentComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 4);\n            i0.ɵɵtemplate(1, TeacherAssignmentComponent_div_1_Template, 11, 14, \"div\", 5);\n            i0.ɵɵelementStart(2, \"div\", 6)(3, \"div\", 7)(4, \"div\", 8)(5, \"h3\", 9);\n            i0.ɵɵtext(6, \"Danh s\\u00E1ch h\\u1ECDc sinh\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"div\", 10)(8, \"div\", 11);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(9, \"svg\", 12);\n            i0.ɵɵelement(10, \"path\", 13)(11, \"circle\", 14)(12, \"path\", 15)(13, \"path\", 16);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(14, \" T\\u1ED5ng s\\u1ED1 HS: \");\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(15, \"b\");\n            i0.ɵɵtext(16);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(17, \" em \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(18, \"div\", 17);\n            i0.ɵɵelementStart(19, \"button\", 18);\n            i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_Template_button_click_19_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.toggleUnassignedFilter());\n            });\n            i0.ɵɵelement(20, \"div\", 19);\n            i0.ɵɵtext(21, \" H\\u1ECDc sinh ch\\u01B0a c\\u00F3 GV: \");\n            i0.ɵɵelementStart(22, \"b\");\n            i0.ɵɵtext(23);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(24, \" em \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(25, \"div\", 17);\n            i0.ɵɵelementStart(26, \"p\", 20);\n            i0.ɵɵtext(27, \"\\u0110\\u00E3 ch\\u1ECDn: \");\n            i0.ɵɵelementStart(28, \"span\", 21);\n            i0.ɵɵtext(29);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(30, \" em\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(31, \"div\", 22)(32, \"div\", 23)(33, \"select\", 24, 0);\n            i0.ɵɵlistener(\"change\", function TeacherAssignmentComponent_Template_select_change_33_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onBlockFilterChange($event));\n            });\n            i0.ɵɵelementStart(35, \"option\", 25);\n            i0.ɵɵtext(36, \"T\\u1EA5t c\\u1EA3 kh\\u1ED1i\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(37, \"optgroup\", 26)(38, \"option\", 27);\n            i0.ɵɵtext(39, \"Kh\\u1ED1i M\\u1EA7m\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(40, \"option\", 28);\n            i0.ɵɵtext(41, \"Kh\\u1ED1i Ch\\u1ED3i\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(42, \"option\", 29);\n            i0.ɵɵtext(43, \"Kh\\u1ED1i L\\u00E1\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(44, \"optgroup\", 30)(45, \"option\", 31);\n            i0.ɵɵtext(46, \"Kh\\u1ED1i 6-18 th\\u00E1ng\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(47, \"option\", 32);\n            i0.ɵɵtext(48, \"Kh\\u1ED1i 19-24 th\\u00E1ng\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(49, \"option\", 33);\n            i0.ɵɵtext(50, \"Kh\\u1ED1i 25-36 th\\u00E1ng\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(51, \"div\", 34);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(52, \"svg\", 35);\n            i0.ɵɵelement(53, \"path\", 36);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(54, \"div\", 23)(55, \"select\", 24, 1);\n            i0.ɵɵlistener(\"change\", function TeacherAssignmentComponent_Template_select_change_55_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onClassFilterChange($event));\n            });\n            i0.ɵɵelementStart(57, \"option\", 25);\n            i0.ɵɵtext(58, \"T\\u1EA5t c\\u1EA3 l\\u1EDBp\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(59, TeacherAssignmentComponent_optgroup_59_Template, 2, 3, \"optgroup\", 37);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(60, \"div\", 34);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(61, \"svg\", 35);\n            i0.ɵɵelement(62, \"path\", 36);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(63, \"div\", 38)(64, \"input\", 39);\n            i0.ɵɵlistener(\"input\", function TeacherAssignmentComponent_Template_input_input_64_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onStudentSearch($event));\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(65, \"div\", 40);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(66, \"svg\", 12);\n            i0.ɵɵelement(67, \"circle\", 41)(68, \"path\", 42);\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(69, \"div\", 43)(70, \"table\", 44)(71, \"thead\", 45)(72, \"tr\")(73, \"th\", 46)(74, \"input\", 47);\n            i0.ɵɵlistener(\"change\", function TeacherAssignmentComponent_Template_input_change_74_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.toggleSelectAll());\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(75, \"th\", 48);\n            i0.ɵɵtext(76, \"H\\u1ECDc sinh\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(77, \"th\", 48);\n            i0.ɵɵtext(78, \"L\\u1EDBp\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(79, \"th\", 48);\n            i0.ɵɵtext(80, \"Gi\\u00E1o vi\\u00EAn \\u0111ang d\\u1EA1y\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(81, \"tbody\", 49);\n            i0.ɵɵtemplate(82, TeacherAssignmentComponent_tr_82_Template, 15, 12, \"tr\", 50)(83, TeacherAssignmentComponent_tr_83_Template, 3, 1, \"tr\", 51);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(84, \"div\", 52)(85, \"div\", 53)(86, \"h3\", 54);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(87, \"svg\", 55);\n            i0.ɵɵelement(88, \"path\", 13)(89, \"circle\", 14)(90, \"path\", 15)(91, \"path\", 16);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(92, \" Ch\\u1ECDn Gi\\u00E1o Vi\\u00EAn \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(93, \"div\", 56)(94, \"input\", 57);\n            i0.ɵɵlistener(\"input\", function TeacherAssignmentComponent_Template_input_input_94_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onTeacherSearch($event));\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(95, \"div\", 58);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(96, \"svg\", 12);\n            i0.ɵɵelement(97, \"circle\", 41)(98, \"path\", 42);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(99, \"div\", 59)(100, \"div\", 60);\n            i0.ɵɵtemplate(101, TeacherAssignmentComponent_label_101_Template, 11, 17, \"label\", 61)(102, TeacherAssignmentComponent_div_102_Template, 2, 0, \"div\", 62);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(103, \"div\", 63)(104, \"div\", 64)(105, \"span\");\n            i0.ɵɵtext(106, \"Ch\\u1ECDn: \");\n            i0.ɵɵelementStart(107, \"b\");\n            i0.ɵɵtext(108);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(109, \" GV\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(110, \"span\");\n            i0.ɵɵtext(111, \"\\u00C1p d\\u1EE5ng: \");\n            i0.ɵɵelementStart(112, \"b\");\n            i0.ɵɵtext(113);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(114, \" HS\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(115, \"div\", 65)(116, \"label\", 66)(117, \"input\", 67, 2);\n            i0.ɵɵlistener(\"change\", function TeacherAssignmentComponent_Template_input_change_117_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              const homeroomCheckbox_r12 = i0.ɵɵreference(118);\n              return i0.ɵɵresetView(ctx.onHomeroomToggle($event.target.checked, homeroomCheckbox_r12));\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(119, \"span\");\n            i0.ɵɵtext(120, \"\\u0110\\u1EB7t l\\u00E0m Gi\\u00E1o vi\\u00EAn ch\\u1EE7 nhi\\u1EC7m\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(121, \"div\", 68);\n            i0.ɵɵtext(122, \"N\\u1EBFu b\\u1EADt th\\u00EC gi\\u00E1o vi\\u00EAn s\\u1EBD \\u0111\\u01B0\\u1EE3c ph\\u00E2n c\\u00F4ng l\\u00E0m ch\\u1EE7 nhi\\u1EC7m c\\u1EE7a l\\u1EDBp \\u0111ang ch\\u1ECDn\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(123, \"button\", 69);\n            i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_Template_button_click_123_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.applyAssignment());\n            });\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(124, \"svg\", 70);\n            i0.ɵɵelement(125, \"path\", 71)(126, \"path\", 72);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(127, \" Th\\u00EAm ph\\u00E2n c\\u00F4ng \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(128, \"button\", 73);\n            i0.ɵɵlistener(\"click\", function TeacherAssignmentComponent_Template_button_click_128_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.removeAssignment());\n            });\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(129, \"svg\", 70);\n            i0.ɵɵelement(130, \"path\", 74)(131, \"path\", 75)(132, \"path\", 76);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(133, \" G\\u1EE1 ph\\u00E2n c\\u00F4ng \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(134, TeacherAssignmentComponent_div_134_Template, 18, 2, \"div\", 77);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.showToast);\n            i0.ɵɵadvance(15);\n            i0.ɵɵtextInterpolate(ctx.students.length);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(21, _c2, ctx.showUnassignedOnly, !ctx.showUnassignedOnly));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngClass\", ctx.unassignedCount > 0 ? \"bg-orange-500\" : \"bg-gray-300\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.unassignedCount);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate(ctx.selectedStudentIds.size);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"value\", ctx.blockFilter);\n            i0.ɵɵadvance(22);\n            i0.ɵɵproperty(\"value\", ctx.classFilter);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngForOf\", ctx.getGroupedClasses())(\"ngForTrackBy\", ctx.trackByGroupLabel);\n            i0.ɵɵadvance(15);\n            i0.ɵɵproperty(\"checked\", ctx.isAllSelected());\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngForOf\", ctx.filteredStudents);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.filteredStudents.length === 0);\n            i0.ɵɵadvance(18);\n            i0.ɵɵproperty(\"ngForOf\", ctx.filteredTeachers);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.filteredTeachers.length === 0);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate(ctx.selectedTeacherIds.size);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate(ctx.selectedStudentIds.size);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"checked\", ctx.assignAsHomeroom);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"disabled\", ctx.selectedStudentIds.size === 0 || ctx.selectedTeacherIds.size === 0);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"disabled\", ctx.selectedStudentIds.size === 0 || ctx.selectedTeacherIds.size === 0);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.viewingStudentDetails);\n          }\n        },\n        dependencies: [CommonModule, i1.NgClass, i1.NgForOf, i1.NgIf],\n        encapsulation: 2\n      });\n    }\n  }\n  return TeacherAssignmentComponent;\n})();","map":{"version":3,"names":["ElementRef","CommonModule","MOCK_STUDENTS","MOCK_TEACHERS","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtemplate","TeacherAssignmentComponent_div_1__svg_svg_2_Template","TeacherAssignmentComponent_div_1__svg_svg_3_Template","TeacherAssignmentComponent_div_1__svg_svg_4_Template","ɵɵtext","ɵɵlistener","TeacherAssignmentComponent_div_1_Template_button_click_7_listener","ɵɵrestoreView","_r2","ctx_r2","ɵɵnextContext","ɵɵresetView","showToast","ɵɵproperty","ɵɵpureFunction3","_c3","toastType","ɵɵadvance","_c4","ɵɵtextInterpolate","toastMessage","cls_r4","TeacherAssignmentComponent_optgroup_59_option_1_Template","group_r5","label","classes","trackByClass","TeacherAssignmentComponent_tr_82_ng_container_12_span_1_span_3_Template","student_r7","homeroomTeacherId","t_r8","id","shortName","ɵɵelementContainerStart","TeacherAssignmentComponent_tr_82_ng_container_12_span_1_Template","getAssignedTeachers","TeacherAssignmentComponent_tr_82_Template_td_click_1_listener","_r6","$implicit","toggleStudent","TeacherAssignmentComponent_tr_82_Template_input_change_2_listener","TeacherAssignmentComponent_tr_82_Template_td_click_3_listener","TeacherAssignmentComponent_tr_82_Template_td_click_8_listener","TeacherAssignmentComponent_tr_82_Template_div_click_11_listener","openTeacherDetails","TeacherAssignmentComponent_tr_82_ng_container_12_Template","TeacherAssignmentComponent_tr_82_ng_template_13_Template","ɵɵtemplateRefExtractor","ɵɵpureFunction1","_c5","selectedStudentIds","has","fullName","code","ɵɵtextInterpolate1","className","_c6","length","noTeacher_r9","showUnassignedOnly","TeacherAssignmentComponent_label_101_Template_input_change_1_listener","teacher_r11","_r10","toggleTeacherSelection","TeacherAssignmentComponent_label_101__svg_svg_3_Template","ɵɵpureFunction2","_c7","isTeacherSelected","_c8","_c9","name","cccd","slice","teacher_r14","avatar","ɵɵsanitizeUrl","dob","gender","phone","ɵɵpropertyInterpolate","address","TeacherAssignmentComponent_div_134_Template_div_click_1_listener","_r13","closeTeacherDetails","TeacherAssignmentComponent_div_134_Template_button_click_11_listener","TeacherAssignmentComponent_div_134_div_17_Template","viewingStudentDetails","viewingTeachers","TeacherAssignmentComponent","constructor","elementRef","students","teachers","filteredStudents","filteredTeachers","Set","selectedTeacherIds","studentSearchTerm","blockFilter","classFilter","teacherSearchTerm","assignAsHomeroom","applyStudentFilters","showNotification","message","type","setTimeout","unassignedCount","filter","s","assignedTeacherIds","toggleUnassignedFilter","onStudentSearch","event","target","value","toLowerCase","onBlockFilterChange","onClassFilterChange","includes","blockSelect","nativeElement","getAvailableClasses","allClasses","map","sort","c","startsWith","getGroupedClasses","filteredClasses","mauGiao","nhaTre","groups","push","trackByGroupLabel","index","item","cls","getClassPriority","result","matchesSearch","matchesBlock","matchesClass","isUnassigned","matchesUnassigned","a","b","priorityA","priorityB","localeCompare","onTeacherSearch","t","delete","add","toggleSelectAll","isAllSelected","clear","forEach","size","teacherId","applyAssignment","teachersToAdd","Array","from","countSuccess","hasError","student","added","newId","teacher","find","homeroomTeacher","existingClass","getHomeroomClassForTeacher","teacherName","removeAssignment","teachersToRemove","changeCount","originalLength","existingId","undefined","onHomeroomToggle","checked","checkboxElement","assigned","ɵɵdirectiveInject","selectors","viewQuery","TeacherAssignmentComponent_Query","rf","ctx","TeacherAssignmentComponent_div_1_Template","TeacherAssignmentComponent_Template_button_click_19_listener","_r1","TeacherAssignmentComponent_Template_select_change_33_listener","$event","TeacherAssignmentComponent_Template_select_change_55_listener","TeacherAssignmentComponent_optgroup_59_Template","TeacherAssignmentComponent_Template_input_input_64_listener","TeacherAssignmentComponent_Template_input_change_74_listener","TeacherAssignmentComponent_tr_82_Template","TeacherAssignmentComponent_tr_83_Template","TeacherAssignmentComponent_Template_input_input_94_listener","TeacherAssignmentComponent_label_101_Template","TeacherAssignmentComponent_div_102_Template","TeacherAssignmentComponent_Template_input_change_117_listener","homeroomCheckbox_r12","ɵɵreference","TeacherAssignmentComponent_Template_button_click_123_listener","TeacherAssignmentComponent_Template_button_click_128_listener","TeacherAssignmentComponent_div_134_Template","_c2","i1","NgClass","NgForOf","NgIf","encapsulation"],"sources":["D:\\VN AI SOFTWARE\\Code\\phan-cong-giao-vien\\components\\TeacherAssignment.ts"],"sourcesContent":["\r\nimport { Component, ElementRef, Inject, ViewChild } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MOCK_STUDENTS, MOCK_TEACHERS } from '../constants';\r\nimport { Student, Teacher } from '../types';\r\n\r\n@Component({\r\n  selector: 'app-teacher-assignment',\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n  template: `\r\n    <div class=\"flex flex-col lg:flex-row gap-6 h-[calc(100vh-140px)] relative\">\r\n      \r\n      <!-- TOAST NOTIFICATION -->\r\n      <div *ngIf=\"showToast\" \r\n           class=\"absolute top-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg border animate-in fade-in slide-in-from-top-4 duration-300\"\r\n           [ngClass]=\"{\r\n             'bg-green-50 border-green-200 text-green-800': toastType === 'success',\r\n             'bg-yellow-50 border-yellow-200 text-yellow-800': toastType === 'warning',\r\n             'bg-red-50 border-red-200 text-red-800': toastType === 'error'\r\n           }\">\r\n         <div [ngClass]=\"{\r\n             'text-green-500': toastType === 'success',\r\n             'text-yellow-500': toastType === 'warning',\r\n             'text-red-500': toastType === 'error'\r\n         }\">\r\n            <svg *ngIf=\"toastType === 'success'\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"/><polyline points=\"22 4 12 14.01 9 11.01\"/></svg>\r\n            <svg *ngIf=\"toastType === 'warning'\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"/><line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"/><line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"/></svg>\r\n            <svg *ngIf=\"toastType === 'error'\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"/><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"/></svg>\r\n         </div>\r\n         <div class=\"text-sm font-medium\">{{ toastMessage }}</div>\r\n         <button (click)=\"showToast = false\" class=\"ml-2 hover:opacity-70\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>\r\n         </button>\r\n      </div>\r\n\r\n      <!-- LEFT COLUMN: STUDENT LIST (Main Work Area) -->\r\n      <div class=\"flex-1 bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col overflow-hidden\">\r\n        \r\n        <!-- Header & Search -->\r\n        <div class=\"p-4 border-b border-gray-200 bg-gray-50 flex flex-col gap-3\">\r\n          <div class=\"flex items-center justify-between\">\r\n             <h3 class=\"font-semibold text-gray-800\">Danh sách học sinh</h3>\r\n             \r\n             <div class=\"flex items-center gap-3\">\r\n                <!-- Total Students Badge -->\r\n                <div class=\"flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-100\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"/><circle cx=\"9\" cy=\"7\" r=\"4\"/><path d=\"M22 21v-2a4 4 0 0 0-3-3.87\"/><path d=\"M16 3.13a4 4 0 0 1 0 7.75\"/></svg>\r\n                    Tổng số HS: <b>{{ students.length }}</b> em\r\n                </div>\r\n\r\n                <div class=\"h-4 w-px bg-gray-300\"></div>\r\n\r\n                <!-- Unassigned Filter Toggle -->\r\n                <button \r\n                  (click)=\"toggleUnassignedFilter()\"\r\n                  class=\"flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium border transition-colors shadow-sm\"\r\n                  [ngClass]=\"{\r\n                    'bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100': showUnassignedOnly,\r\n                    'bg-white text-gray-600 border-gray-300 hover:bg-gray-50': !showUnassignedOnly\r\n                  }\">\r\n                   <div class=\"w-2 h-2 rounded-full\" [ngClass]=\"unassignedCount > 0 ? 'bg-orange-500' : 'bg-gray-300'\"></div>\r\n                   Học sinh chưa có GV: <b>{{ unassignedCount }}</b> em\r\n                </button>\r\n\r\n                <div class=\"h-4 w-px bg-gray-300\"></div>\r\n\r\n                <p class=\"text-xs text-gray-500\">Đã chọn: <span class=\"font-bold text-blue-600\">{{ selectedStudentIds.size }}</span> em</p>\r\n             </div>\r\n          </div>\r\n          \r\n          <div class=\"flex gap-3\">\r\n             <!-- Block Filter (Khối) -->\r\n             <div class=\"relative w-40\">\r\n                <select \r\n                  #blockSelect\r\n                  (change)=\"onBlockFilterChange($event)\"\r\n                  [value]=\"blockFilter\"\r\n                  class=\"w-full pl-2 pr-8 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none appearance-none bg-white\">\r\n                  <option value=\"\">Tất cả khối</option>\r\n                  <optgroup label=\"Mẫu Giáo\">\r\n                    <option value=\"Mầm\">Khối Mầm</option>\r\n                    <option value=\"Chồi\">Khối Chồi</option>\r\n                    <option value=\"Lá\">Khối Lá</option>\r\n                  </optgroup>\r\n                  <optgroup label=\"Nhà Trẻ\">\r\n                    <option value=\"6-18\">Khối 6-18 tháng</option>\r\n                    <option value=\"19-24\">Khối 19-24 tháng</option>\r\n                    <option value=\"25-36\">Khối 25-36 tháng</option>\r\n                  </optgroup>\r\n                </select>\r\n                <div class=\"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400\">\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m6 9 6 6 6-6\"/></svg>\r\n                </div>\r\n             </div>\r\n\r\n             <!-- Class Filter (Lớp cụ thể) -->\r\n             <div class=\"relative w-40\">\r\n                <select \r\n                  #classSelect\r\n                  (change)=\"onClassFilterChange($event)\"\r\n                  [value]=\"classFilter\"\r\n                  class=\"w-full pl-2 pr-8 py-1.5 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none appearance-none bg-white\">\r\n                  <option value=\"\">Tất cả lớp</option>\r\n                  <optgroup *ngFor=\"let group of getGroupedClasses(); trackBy: trackByGroupLabel\" [label]=\"group.label\">\r\n                    <option *ngFor=\"let cls of group.classes; trackBy: trackByClass\" [value]=\"cls\">{{ cls }}</option>\r\n                  </optgroup>\r\n                </select>\r\n                <div class=\"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400\">\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m6 9 6 6 6-6\"/></svg>\r\n                </div>\r\n             </div>\r\n\r\n             <!-- Student Search -->\r\n             <div class=\"relative flex-1\">\r\n                <input \r\n                  type=\"text\" \r\n                  (input)=\"onStudentSearch($event)\"\r\n                  placeholder=\"Tìm tên hoặc mã số...\" \r\n                  class=\"pl-9 pr-4 py-1.5 w-full border border-gray-300 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none\"\r\n                >\r\n                <div class=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\">\r\n                   <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"11\" cy=\"11\" r=\"8\"/><path d=\"m21 21-4.3-4.3\"/></svg>\r\n                </div>\r\n             </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Table -->\r\n        <div class=\"flex-1 overflow-auto\">\r\n          <table class=\"w-full text-left border-collapse\">\r\n            <thead class=\"bg-white sticky top-0 z-10 shadow-sm text-xs font-semibold text-gray-500 uppercase\">\r\n              <tr>\r\n                <th class=\"px-4 py-3 border-b w-10 bg-gray-50\">\r\n                   <input type=\"checkbox\" [checked]=\"isAllSelected()\" (change)=\"toggleSelectAll()\" class=\"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer\">\r\n                </th>\r\n                <th class=\"px-4 py-3 border-b bg-gray-50\">Học sinh</th>\r\n                <th class=\"px-4 py-3 border-b bg-gray-50\">Lớp</th>\r\n                <th class=\"px-4 py-3 border-b bg-gray-50\">Giáo viên đang dạy</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody class=\"divide-y divide-gray-100\">\r\n              <tr *ngFor=\"let student of filteredStudents\" \r\n                  class=\"hover:bg-blue-50/40 transition-colors\"\r\n                  [ngClass]=\"{'bg-blue-50': selectedStudentIds.has(student.id)}\">\r\n                \r\n                <!-- Checkbox Column -->\r\n                <td class=\"px-4 py-3 cursor-pointer\" (click)=\"toggleStudent(student.id)\">\r\n                   <input type=\"checkbox\" [checked]=\"selectedStudentIds.has(student.id)\" (change)=\"toggleStudent(student.id)\" class=\"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer\">\r\n                </td>\r\n\r\n                <!-- Info Column -->\r\n                <td class=\"px-4 py-3 cursor-pointer\" (click)=\"toggleStudent(student.id)\">\r\n                  <div class=\"font-medium text-gray-800 text-sm\">{{ student.fullName }}</div>\r\n                  <div class=\"text-xs text-gray-500 font-mono\">{{ student.code }}</div>\r\n                </td>\r\n\r\n                <!-- Class Column -->\r\n                <td class=\"px-4 py-3 cursor-pointer text-sm text-gray-600\" (click)=\"toggleStudent(student.id)\">\r\n                   {{ student.className }}\r\n                </td>\r\n\r\n                <!-- Assigned Teachers Column (Click to View Details) -->\r\n                <td class=\"px-4 py-3\">\r\n                  <div class=\"grid grid-cols-3 gap-1.5 w-fit\" \r\n                       (click)=\"openTeacherDetails(student)\"\r\n                       [ngClass]=\"{'cursor-pointer hover:opacity-80': getAssignedTeachers(student).length > 0}\">\r\n                    <ng-container *ngIf=\"getAssignedTeachers(student).length > 0; else noTeacher\">\r\n                       <span *ngFor=\"let t of getAssignedTeachers(student)\" \r\n                          class=\"inline-flex items-center justify-center px-2 py-0.5 rounded text-xs font-medium truncate whitespace-nowrap\"\r\n                          [ngClass]=\"student.homeroomTeacherId === t.id ? 'bg-red-100 text-red-800 border border-red-200' : 'bg-blue-100 text-blue-800 border border-blue-200'\">\r\n                        <span>{{ t.shortName }}</span>\r\n                        <span *ngIf=\"student.homeroomTeacherId === t.id\" class=\"ml-1 text-[10px] font-bold bg-red-600 text-white px-1 rounded\">CN</span>\r\n                      </span>\r\n                    </ng-container>\r\n                    <ng-template #noTeacher>\r\n                      <span class=\"text-gray-400 select-none\">-</span>\r\n                    </ng-template>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n              <tr *ngIf=\"filteredStudents.length === 0\">\r\n                 <td colspan=\"4\" class=\"p-8 text-center text-gray-500 text-sm\">\r\n                    {{ showUnassignedOnly ? 'Tuyệt vời! Tất cả học sinh đều đã có giáo viên.' : 'Không tìm thấy học sinh phù hợp' }}\r\n                 </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- RIGHT COLUMN: TEACHER PALETTE (Fixed Action Area) -->\r\n      <div class=\"w-full lg:w-80 bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col\">\r\n        <div class=\"p-4 border-b border-gray-200 bg-blue-50 rounded-t-lg\">\r\n           <h3 class=\"font-semibold text-blue-900 flex items-center gap-2\">\r\n             <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"/><circle cx=\"9\" cy=\"7\" r=\"4\"/><path d=\"M22 21v-2a4 4 0 0 0-3-3.87\"/><path d=\"M16 3.13a4 4 0 0 1 0 7.75\"/></svg>\r\n             Chọn Giáo Viên\r\n           </h3>\r\n           \r\n           <!-- Teacher Search -->\r\n           <div class=\"mt-3 relative\">\r\n             <input \r\n               type=\"text\" \r\n               (input)=\"onTeacherSearch($event)\"\r\n               placeholder=\"Tìm tên hoặc CCCD...\" \r\n               class=\"w-full pl-8 pr-3 py-1.5 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none bg-white\"\r\n             >\r\n             <div class=\"absolute left-2.5 top-1/2 -translate-y-1/2 text-blue-400\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"11\" cy=\"11\" r=\"8\"/><path d=\"m21 21-4.3-4.3\"/></svg>\r\n             </div>\r\n           </div>\r\n        </div>\r\n\r\n        <div class=\"flex-1 overflow-y-auto p-2\">\r\n           <div class=\"space-y-1\">\r\n             <label *ngFor=\"let teacher of filteredTeachers\" \r\n                    class=\"flex items-center p-3 rounded-lg border transition-all cursor-pointer select-none group\"\r\n                    [ngClass]=\"{\r\n                      'bg-blue-50 border-blue-300 shadow-sm': isTeacherSelected(teacher.id),\r\n                      'bg-white border-transparent hover:bg-gray-50': !isTeacherSelected(teacher.id)\r\n                    }\">\r\n                <input type=\"checkbox\" \r\n                       class=\"hidden\"\r\n                       [checked]=\"isTeacherSelected(teacher.id)\"\r\n                       (change)=\"toggleTeacherSelection(teacher.id)\">\r\n                \r\n                <div class=\"flex items-center justify-center w-5 h-5 rounded border mr-3 transition-colors shrink-0\"\r\n                     [ngClass]=\"{\r\n                       'bg-blue-600 border-blue-600 text-white': isTeacherSelected(teacher.id),\r\n                       'border-gray-300 bg-white': !isTeacherSelected(teacher.id)\r\n                     }\">\r\n                     <svg *ngIf=\"isTeacherSelected(teacher.id)\" xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg>\r\n                </div>\r\n\r\n                <div class=\"flex-1 min-w-0\">\r\n                   <div class=\"text-sm font-medium truncate\" [ngClass]=\"{'text-blue-900': isTeacherSelected(teacher.id), 'text-gray-700': !isTeacherSelected(teacher.id)}\">{{ teacher.shortName }}</div>\r\n                   <div class=\"text-xs text-gray-500 truncate\">{{ teacher.name }}</div>\r\n                   <div class=\"text-[10px] text-gray-400 font-mono mt-0.5\">ID: {{ teacher.cccd.slice(-4) }}</div>\r\n                </div>\r\n             </label>\r\n             <div *ngIf=\"filteredTeachers.length === 0\" class=\"text-center p-4 text-xs text-gray-500 italic\">\r\n               Không tìm thấy giáo viên\r\n             </div>\r\n           </div>\r\n        </div>\r\n\r\n        <!-- ACTIONS -->\r\n        <div class=\"p-4 border-t border-gray-200 bg-gray-50 rounded-b-lg space-y-3\">\r\n           <div class=\"flex items-center justify-between text-xs text-gray-600 mb-1\">\r\n             <span>Chọn: <b>{{ selectedTeacherIds.size }}</b> GV</span>\r\n             <span>Áp dụng: <b>{{ selectedStudentIds.size }}</b> HS</span>\r\n           </div>\r\n\r\n           <div class=\"flex items-center gap-3 text-sm\">\r\n             <label class=\"flex items-center gap-2 text-gray-700\">\r\n               <input type=\"checkbox\" class=\"w-4 h-4\" #homeroomCheckbox [checked]=\"assignAsHomeroom\" (change)=\"onHomeroomToggle($any($event.target).checked, homeroomCheckbox)\">\r\n               <span>Đặt làm Giáo viên chủ nhiệm</span>\r\n             </label>\r\n             <div class=\"text-xs text-red-600 font-medium\">Nếu bật thì giáo viên sẽ được phân công làm chủ nhiệm của lớp đang chọn</div>\r\n           </div>\r\n\r\n           <button (click)=\"applyAssignment()\" \r\n                   [disabled]=\"selectedStudentIds.size === 0 || selectedTeacherIds.size === 0\"\r\n                   class=\"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-2.5 px-4 rounded shadow-sm transition-all text-sm\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M5 12h14\"/><path d=\"M12 5v14\"/></svg>\r\n              Thêm phân công\r\n           </button>\r\n\r\n           <button (click)=\"removeAssignment()\" \r\n                   [disabled]=\"selectedStudentIds.size === 0 || selectedTeacherIds.size === 0\"\r\n                   class=\"w-full flex items-center justify-center gap-2 bg-white border border-red-200 text-red-600 hover:bg-red-50 disabled:bg-gray-50 disabled:text-gray-300 disabled:border-gray-200 font-medium py-2.5 px-4 rounded transition-all text-sm\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M3 6h18\"/><path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"/><path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"/></svg>\r\n              Gỡ phân công\r\n           </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- TEACHER DETAILS MODAL (Overlay) -->\r\n      <div *ngIf=\"viewingStudentDetails\" class=\"absolute inset-0 z-50 flex items-center justify-center\">\r\n         <!-- Backdrop -->\r\n         <div class=\"absolute inset-0 bg-black/40 backdrop-blur-sm\" (click)=\"closeTeacherDetails()\"></div>\r\n         \r\n         <!-- Modal Content -->\r\n         <div class=\"relative bg-white rounded-xl shadow-2xl w-[90%] max-w-4xl max-h-[90%] flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200\">\r\n            <!-- Modal Header -->\r\n            <div class=\"p-4 border-b border-gray-100 flex items-center justify-between bg-gray-50\">\r\n               <div>\r\n                  <h3 class=\"font-bold text-gray-800 text-lg\">Giáo viên phụ trách</h3>\r\n                  <p class=\"text-sm text-gray-500\">Học sinh: <span class=\"font-semibold text-blue-600\">{{ viewingStudentDetails.fullName }}</span></p>\r\n               </div>\r\n               <button (click)=\"closeTeacherDetails()\" class=\"p-2 hover:bg-gray-200 rounded-full transition-colors\">\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"text-gray-500\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>\r\n               </button>\r\n            </div>\r\n\r\n            <!-- Modal Body (Grid of Cards) -->\r\n            <div class=\"p-6 overflow-y-auto bg-gray-50/50\">\r\n               <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  <div *ngFor=\"let teacher of viewingTeachers\" class=\"bg-white rounded-xl border border-gray-200 shadow-sm p-5 hover:shadow-md transition-shadow relative group\">\r\n                     <!-- Header (Avatar + Name) -->\r\n                     <div class=\"flex items-start gap-4 mb-4\">\r\n                        <img [src]=\"teacher.avatar\" alt=\"Avatar\" class=\"w-12 h-12 rounded-full border border-gray-100 bg-gray-50 object-cover\">\r\n                        <div>\r\n                           <h4 class=\"font-bold text-gray-800 text-base uppercase leading-tight\">{{ teacher.name }}</h4>\r\n                           <span class=\"inline-block mt-1 px-2 py-0.5 bg-green-50 text-green-700 text-[10px] font-bold uppercase rounded border border-green-100\">Đang dạy</span>\r\n                        </div>\r\n                     </div>\r\n                     \r\n                     <!-- Info List -->\r\n                     <div class=\"space-y-3 mb-5\">\r\n                        <div class=\"flex items-center gap-3 text-sm text-gray-600\">\r\n                           <span class=\"w-5 text-center text-gray-400\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect width=\"18\" height=\"18\" x=\"3\" y=\"4\" rx=\"2\" ry=\"2\"/><line x1=\"16\" x2=\"16\" y1=\"2\" y2=\"6\"/><line x1=\"8\" x2=\"8\" y1=\"2\" y2=\"6\"/><line x1=\"3\" x2=\"21\" y1=\"10\" y2=\"10\"/></svg></span>\r\n                           <span>{{ teacher.dob }}</span>\r\n                           <span class=\"bg-blue-50 text-blue-700 px-2 rounded-full text-xs font-medium\">{{ teacher.gender }}</span>\r\n                        </div>\r\n                         <div class=\"flex items-center gap-3 text-sm text-gray-600\">\r\n                           <span class=\"w-5 text-center text-gray-400\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect width=\"20\" height=\"14\" x=\"2\" y=\"5\" rx=\"2\"/><path d=\"M2 10h20\"/><path d=\"M7 15h.01\"/><path d=\"M17 15h.01\"/></svg></span>\r\n                           <span class=\"font-medium text-gray-800\">CCCD: {{ teacher.cccd }}</span>\r\n                        </div>\r\n                        <div class=\"flex items-center gap-3 text-sm text-gray-600\">\r\n                           <span class=\"w-5 text-center text-gray-400\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\"/></svg></span>\r\n                           <span>{{ teacher.phone }}</span>\r\n                        </div>\r\n                        <div class=\"flex items-start gap-3 text-sm text-gray-600\">\r\n                           <span class=\"w-5 text-center text-gray-400 mt-0.5\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z\"/><circle cx=\"12\" cy=\"10\" r=\"3\"/></svg></span>\r\n                           <span class=\"text-xs leading-relaxed line-clamp-2\" title=\"{{ teacher.address }}\">{{ teacher.address }}</span>\r\n                        </div>\r\n                     </div>\r\n\r\n                     <!-- Actions -->\r\n                     <div class=\"flex gap-2 mt-auto\">\r\n                        <button class=\"flex-1 flex items-center justify-center gap-2 border border-gray-300 rounded py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors\">\r\n                           <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\"/></svg>\r\n                           Gọi điện\r\n                        </button>\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </div>\r\n      </div>\r\n\r\n    </div>\r\n  `\r\n})\r\nexport class TeacherAssignmentComponent {\r\n  // Use MOCK_STUDENTS direct reference to ensure synchronization across modules\r\n  students: Student[] = MOCK_STUDENTS;\r\n  teachers: Teacher[] = MOCK_TEACHERS;\r\n  \r\n  filteredStudents: Student[] = [];\r\n  filteredTeachers: Teacher[] = [];\r\n  // ... rest of the code remains same, logic for references is updated by removing JSON.parse/stringify ...\r\n\r\n  selectedStudentIds: Set<number> = new Set();\r\n  selectedTeacherIds: Set<number> = new Set();\r\n\r\n  // Filter States\r\n  studentSearchTerm: string = '';\r\n  blockFilter: string = ''; // Khối: 'Mầm' | 'Chồi' | 'Lá' | '6-18' | '19-24' | '25-36' | ''\r\n  classFilter: string = ''; // Lớp cụ thể: 'Mầm 1', 'Mầm 2', 'Chồi 1', ...\r\n  teacherSearchTerm: string = '';\r\n  \r\n  // New state for unassigned filter\r\n  showUnassignedOnly: boolean = false;\r\n\r\n  // If true, applied teacher(s) will set homeroom for selected students\r\n  assignAsHomeroom: boolean = false;\r\n\r\n  // Template references\r\n  @ViewChild('blockSelect') blockSelect: ElementRef<HTMLSelectElement> | undefined;\r\n  @ViewChild('classSelect') classSelect: ElementRef<HTMLSelectElement> | undefined;\r\n\r\n  // Modal State\r\n  viewingStudentDetails: Student | null = null;\r\n  viewingTeachers: Teacher[] = [];\r\n\r\n  // Toast Notification State\r\n  showToast: boolean = false;\r\n  toastMessage: string = '';\r\n  toastType: 'success' | 'warning' | 'error' = 'success';\r\n  \r\n  constructor(@Inject(ElementRef) private elementRef: ElementRef) {\r\n    this.applyStudentFilters();\r\n    this.filteredTeachers = [...this.teachers];\r\n  }\r\n\r\n  // Helper to show notification\r\n  showNotification(message: string, type: 'success' | 'warning' | 'error' = 'success') {\r\n    this.toastMessage = message;\r\n    this.toastType = type;\r\n    this.showToast = true;\r\n    setTimeout(() => {\r\n        this.showToast = false;\r\n    }, 3000);\r\n  }\r\n\r\n  // Helper to count total unassigned students\r\n  get unassignedCount(): number {\r\n    return this.students.filter(s => !s.assignedTeacherIds || s.assignedTeacherIds.length === 0).length;\r\n  }\r\n\r\n  toggleUnassignedFilter() {\r\n    this.showUnassignedOnly = !this.showUnassignedOnly;\r\n    this.applyStudentFilters();\r\n  }\r\n\r\n  // --- Student Filters ---\r\n  onStudentSearch(event: any) {\r\n    this.studentSearchTerm = event.target.value.toLowerCase();\r\n    this.applyStudentFilters();\r\n  }\r\n\r\n  onBlockFilterChange(event: any) {\r\n    this.blockFilter = event.target.value;\r\n    this.classFilter = ''; // Reset class filter when block changes\r\n    this.applyStudentFilters();\r\n  }\r\n\r\n  onClassFilterChange(event: any) {\r\n    this.classFilter = event.target.value;\r\n    \r\n    // Auto-update blockFilter based on selected class\r\n    if (this.classFilter) {\r\n      if (this.classFilter.includes('Mầm')) {\r\n        this.blockFilter = 'Mầm';\r\n      } else if (this.classFilter.includes('Chồi')) {\r\n        this.blockFilter = 'Chồi';\r\n      } else if (this.classFilter.includes('Lá')) {\r\n        this.blockFilter = 'Lá';\r\n      } else if (this.classFilter.includes('6-18')) {\r\n        this.blockFilter = '6-18';\r\n      } else if (this.classFilter.includes('19-24')) {\r\n        this.blockFilter = '19-24';\r\n      } else if (this.classFilter.includes('25-36')) {\r\n        this.blockFilter = '25-36';\r\n      }\r\n      \r\n      // Force update blockSelect to show the new value\r\n      if (this.blockSelect) {\r\n        this.blockSelect.nativeElement.value = this.blockFilter;\r\n      }\r\n    }\r\n    \r\n    this.applyStudentFilters();\r\n  }\r\n\r\n  // Get available classes based on current block filter\r\n  getAvailableClasses(): string[] {\r\n    const allClasses = [...new Set(this.students.map(s => s.className))].sort();\r\n    if (!this.blockFilter) return allClasses;\r\n    \r\n    // Filter by block prefix (e.g., 'Mầm' includes 'Mầm 1', 'Mầm 2')\r\n    return allClasses.filter(c => c.startsWith(this.blockFilter));\r\n  }\r\n\r\n  // Get grouped classes for template\r\n  getGroupedClasses(): { label: string; classes: string[] }[] {\r\n    const allClasses = [...new Set(this.students.map(s => s.className))].sort();\r\n    \r\n    // If blockFilter is set, only show classes in that block\r\n    let filteredClasses = allClasses;\r\n    if (this.blockFilter) {\r\n      filteredClasses = allClasses.filter(c => c.startsWith(this.blockFilter));\r\n    }\r\n    \r\n    const mauGiao = filteredClasses.filter(c => c.includes('Mầm') || c.includes('Chồi') || c.includes('Lá'));\r\n    const nhaTre = filteredClasses.filter(c => c.includes('6-18') || c.includes('19-24') || c.includes('25-36'));\r\n    \r\n    const groups: { label: string; classes: string[] }[] = [];\r\n    \r\n    if (mauGiao.length > 0) {\r\n      groups.push({ label: 'Mẫu Giáo', classes: mauGiao });\r\n    }\r\n    if (nhaTre.length > 0) {\r\n      groups.push({ label: 'Nhà Trẻ', classes: nhaTre });\r\n    }\r\n    \r\n    return groups;\r\n  }\r\n\r\n  // TrackBy for ngFor to preserve DOM\r\n  trackByGroupLabel(index: number, item: { label: string; classes: string[] }): string {\r\n    return item.label;\r\n  }\r\n\r\n  trackByClass(index: number, cls: string): string {\r\n    return cls;\r\n  }\r\n\r\n  getClassPriority(className: string): number {\r\n    if (className.includes('Mầm')) return 1;\r\n    if (className.includes('Chồi')) return 2;\r\n    if (className.includes('Lá')) return 3;\r\n    if (className.includes('6-18')) return 4;\r\n    if (className.includes('19-24')) return 5;\r\n    if (className.includes('25-36')) return 6;\r\n    return 99; // Các lớp khác (nếu có)\r\n  }\r\n\r\n  applyStudentFilters() {\r\n    // 1. Filter\r\n    let result = this.students.filter(s => {\r\n      const matchesSearch = s.fullName.toLowerCase().includes(this.studentSearchTerm) || \r\n                            s.code.toLowerCase().includes(this.studentSearchTerm);\r\n      \r\n      // Filter by block first (e.g., 'Mầm' matches 'Mầm 1', 'Mầm 2')\r\n      let matchesBlock = true;\r\n      if (this.blockFilter) {\r\n        matchesBlock = s.className.startsWith(this.blockFilter);\r\n      }\r\n      \r\n      // Then filter by specific class (exact match)\r\n      const matchesClass = this.classFilter ? s.className === this.classFilter : true;\r\n      \r\n      const isUnassigned = !s.assignedTeacherIds || s.assignedTeacherIds.length === 0;\r\n      const matchesUnassigned = this.showUnassignedOnly ? isUnassigned : true;\r\n\r\n      return matchesSearch && matchesBlock && matchesClass && matchesUnassigned;\r\n    });\r\n\r\n    // 2. Sort: Mầm -> Chồi -> Lá -> 6-18 -> 19-24 -> 25-36\r\n    result.sort((a, b) => {\r\n      const priorityA = this.getClassPriority(a.className);\r\n      const priorityB = this.getClassPriority(b.className);\r\n\r\n      if (priorityA !== priorityB) {\r\n        return priorityA - priorityB;\r\n      }\r\n      \r\n      return a.className.localeCompare(b.className);\r\n    });\r\n\r\n    this.filteredStudents = result;\r\n  }\r\n\r\n  // --- Teacher Search ---\r\n  onTeacherSearch(event: any) {\r\n    this.teacherSearchTerm = event.target.value.toLowerCase();\r\n    this.filteredTeachers = this.teachers.filter(t => \r\n      t.name.toLowerCase().includes(this.teacherSearchTerm) || \r\n      t.shortName.toLowerCase().includes(this.teacherSearchTerm) ||\r\n      t.cccd.includes(this.teacherSearchTerm)\r\n    );\r\n  }\r\n\r\n  // --- Student Selection Logic ---\r\n  toggleStudent(id: number) {\r\n    if (this.selectedStudentIds.has(id)) {\r\n      this.selectedStudentIds.delete(id);\r\n    } else {\r\n      this.selectedStudentIds.add(id);\r\n    }\r\n  }\r\n\r\n  toggleSelectAll() {\r\n    if (this.isAllSelected()) {\r\n      this.selectedStudentIds.clear();\r\n    } else {\r\n      this.filteredStudents.forEach(s => this.selectedStudentIds.add(s.id));\r\n    }\r\n  }\r\n\r\n  isAllSelected(): boolean {\r\n    return this.filteredStudents.length > 0 && this.selectedStudentIds.size === this.filteredStudents.length;\r\n  }\r\n\r\n  // --- Teacher Selection Logic ---\r\n  toggleTeacherSelection(teacherId: number) {\r\n    if (this.selectedTeacherIds.has(teacherId)) {\r\n      this.selectedTeacherIds.delete(teacherId);\r\n    } else {\r\n      this.selectedTeacherIds.add(teacherId);\r\n    }\r\n  }\r\n\r\n  isTeacherSelected(teacherId: number): boolean {\r\n    return this.selectedTeacherIds.has(teacherId);\r\n  }\r\n\r\n  // --- Main Actions ---\r\n  applyAssignment() {\r\n    if (this.selectedStudentIds.size === 0 || this.selectedTeacherIds.size === 0) return;\r\n\r\n    const teachersToAdd = Array.from(this.selectedTeacherIds);\r\n    // If assigning as homeroom, ensure only one teacher is selected\r\n    if (this.assignAsHomeroom && teachersToAdd.length > 1) {\r\n      this.showNotification('Chỉ có thể chọn 1 giáo viên làm chủ nhiệm. Vui lòng chọn 1 giáo viên.', 'warning');\r\n      // Uncheck the homeroom toggle immediately\r\n      this.assignAsHomeroom = false;\r\n      return;\r\n    }\r\n    let countSuccess = 0;\r\n    let hasError = false;\r\n\r\n    this.students.forEach(student => {\r\n      if (this.selectedStudentIds.has(student.id)) {\r\n        if (!student.assignedTeacherIds) student.assignedTeacherIds = [];\r\n        \r\n        let added = false;\r\n        for (const newId of teachersToAdd) {\r\n          // If not assigning as homeroom and the teacher is already the student's homeroom, warn and skip\r\n          if (!this.assignAsHomeroom && student.homeroomTeacherId && newId === student.homeroomTeacherId) {\r\n            const teacher = this.teachers.find(t => t.id === newId);\r\n            if (teacher) {\r\n              this.showNotification(`Giáo viên ${teacher.shortName} đã được phân làm giáo viên chủ nhiệm cho học sinh ${student.fullName}.`, 'warning');\r\n            }\r\n            continue;\r\n          }\r\n\r\n          if (!student.assignedTeacherIds!.includes(newId)) {\r\n            student.assignedTeacherIds!.push(newId);\r\n            added = true;\r\n          }\r\n        }\r\n\r\n        // If assigning as homeroom, set homeroomTeacherId to the first selected teacher\r\n        if (this.assignAsHomeroom && teachersToAdd.length > 0) {\r\n          const homeroomTeacherId = teachersToAdd[0];\r\n          const homeroomTeacher = this.teachers.find(t => t.id === homeroomTeacherId);\r\n          \r\n          // Check if this teacher is already homeroom of another class\r\n          const existingClass = this.getHomeroomClassForTeacher(homeroomTeacherId);\r\n          if (existingClass && existingClass !== student.className) {\r\n            const teacherName = homeroomTeacher?.shortName || 'Giáo viên';\r\n            this.showNotification(`${teacherName} đã là giáo viên chủ nhiệm của lớp ${existingClass}. Một giáo viên chỉ có thể chủ nhiệm 1 lớp.`, 'error');\r\n            hasError = true;\r\n            // Reset homeroom toggle when error occurs\r\n            this.assignAsHomeroom = false;\r\n            return; // Stop assignment for this student\r\n          }\r\n          \r\n          // pick first selected teacher as homeroom\r\n          student.homeroomTeacherId = homeroomTeacherId;\r\n          // ensure homeroom teacher is included in assignedTeacherIds\r\n          if (!student.assignedTeacherIds.includes(homeroomTeacherId)) {\r\n            student.assignedTeacherIds.push(homeroomTeacherId);\r\n            added = true;\r\n          }\r\n        }\r\n\r\n        if (added) countSuccess++;\r\n      }\r\n    });\r\n\r\n    this.applyStudentFilters(); // Refresh UI\r\n    this.selectedTeacherIds.clear(); // Reset Teacher checkboxes\r\n    this.selectedStudentIds.clear(); // Reset Student checkboxes\r\n    // Reset the homeroom assignment toggle after applying\r\n    this.assignAsHomeroom = false;\r\n\r\n    // Only show success message if there was no error and assignments were made\r\n    if (!hasError && countSuccess > 0) {\r\n      this.showNotification(`Đã phân công thành công cho ${countSuccess} học sinh!`, 'success');\r\n    }\r\n  }\r\n\r\n  removeAssignment() {\r\n     if (this.selectedStudentIds.size === 0 || this.selectedTeacherIds.size === 0) return;\r\n\r\n     const teachersToRemove = Array.from(this.selectedTeacherIds);\r\n     let changeCount = 0;\r\n\r\n     this.students.forEach(student => {\r\n       if (this.selectedStudentIds.has(student.id) && student.assignedTeacherIds) {\r\n          const originalLength = student.assignedTeacherIds.length;\r\n          student.assignedTeacherIds = student.assignedTeacherIds.filter(\r\n            existingId => !teachersToRemove.includes(existingId)\r\n          );\r\n          // If homeroom teacher removed, clear homeroomTeacherId\r\n          if (student.homeroomTeacherId && teachersToRemove.includes(student.homeroomTeacherId)) {\r\n            student.homeroomTeacherId = undefined;\r\n          }\r\n          if (student.assignedTeacherIds.length !== originalLength) {\r\n             changeCount++;\r\n          }\r\n       }\r\n     });\r\n\r\n    if (changeCount === 0) {\r\n       this.showNotification('Các học sinh đã chọn chưa được phân công bởi giáo viên này.', 'warning');\r\n       return;\r\n    }\r\n\r\n    this.applyStudentFilters(); // Refresh UI\r\n    this.selectedTeacherIds.clear(); // Reset Teacher checkboxes\r\n    this.selectedStudentIds.clear(); // Reset Student checkboxes\r\n\r\n    this.showNotification(`Đã gỡ phân công thành công cho ${changeCount} học sinh.`, 'success');\r\n  }\r\n\r\n  // --- Helpers ---\r\n  getAssignedTeachers(student: Student): Teacher[] {\r\n    if (!student.assignedTeacherIds) return [];\r\n    return this.teachers.filter(t => student.assignedTeacherIds!.includes(t.id));\r\n  }\r\n\r\n  // Check if a teacher is already homeroom of another class\r\n  getHomeroomClassForTeacher(teacherId: number): string | null {\r\n    const student = this.students.find(s => s.homeroomTeacherId === teacherId);\r\n    return student ? student.className : null;\r\n  }\r\n\r\n  // Toggle handler for homeroom checkbox — validate selection\r\n  onHomeroomToggle(checked: boolean, checkboxElement?: any) {\r\n    if (checked && this.selectedTeacherIds.size > 1) {\r\n      this.showNotification('Chỉ có thể chọn 1 giáo viên làm chủ nhiệm. Vui lòng chọn 1 giáo viên.', 'warning');\r\n      this.assignAsHomeroom = false;\r\n      // Force uncheck the checkbox immediately\r\n      if (checkboxElement) {\r\n        checkboxElement.checked = false;\r\n      }\r\n      return;\r\n    }\r\n\r\n    this.assignAsHomeroom = checked;\r\n  }\r\n\r\n  // --- Details Modal Logic ---\r\n  openTeacherDetails(student: Student) {\r\n    const assigned = this.getAssignedTeachers(student);\r\n    if (assigned.length === 0) return;\r\n    \r\n    this.viewingStudentDetails = student;\r\n    this.viewingTeachers = assigned;\r\n  }\r\n\r\n  closeTeacherDetails() {\r\n    this.viewingStudentDetails = null;\r\n    this.viewingTeachers = [];\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}